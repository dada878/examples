# PRD：單一班級學生作業繳交系統

## **C — Context（產品情境）**

* **背景**：目前學生用 LINE、Email 傳作業，老師收件不集中，批改狀態混亂。
* **需求**：一個簡單的平台，讓學生上傳作業、老師下載與批改，並能回饋成績。
* **使用者**：
  * 學生 → 上傳作業、查看繳交狀態
  * 老師 → 批改作業、輸入分數與回饋

## **A — Appearance（設計風格）**

* **風格**：亮色、現代極簡風格、專業感。
* **配色**：藍色主色、白底、灰色輔助。
* **UI 元件**：使用 Shadcn UI 套件

## **S — Structure（頁面結構）**

### 1. 登入頁（`/login`）

* **功能**：

  * Google OAuth 登入。
  * 登入後 → 導向 `/dashboard`。
  * 自動判斷角色（學生/老師）。

### 2. 主控台（`/dashboard`）

* **學生功能**：

  * 顯示「我的作業」列表：標題、截止日期、狀態（未交 / 已交 / 已批改）。
  * 狀態顯示：

    * 未交 → 顯示「去繳交」按鈕。
    * 已交 → 顯示檔案名稱、繳交時間。
    * 已批改 → 顯示分數與老師回饋。
* **老師功能**：

  * 顯示所有學生的繳交狀態表：姓名、狀態、繳交時間。
  * 提供按鈕進入「單一學生作業」批改頁。

### 3. 學生作業繳交頁（`/submit/[assignmentId]`）

* **功能**：
  * 上傳檔案（為方便預覽，僅支援 PDF、TXT、PNG 格式）。
  * 可輸入簡短作業備註（選填）。
  * 點擊「繳交」→ 更新狀態為「已交」。
  * 支援「重新繳交」，覆蓋舊檔案。
  * 成功後 → 回到 `/dashboard`，狀態更新。

### 4. 老師批改單一學生作業頁（`/review/[assignmentId]/[studentId]`）
* **功能**：
  * 顯示學生已繳交檔案
    * 頁面主體為學生繳交的檔案作業，整頁預覽 PDF / TXT / PNG 檔案
    * 側邊欄顯示相關功能
        * 可以看到學生留下的備注（如果有）
        * 分數輸入框（0–100，必填）。
        * 文字回饋框（例如「程式有 bug，請檢查迴圈」，選填）。
        * 送出批改結果按鈕，可更新狀態為「已批改」，同步顯示在學生端。
    * 離開頁面前如果尚未提交，要提醒用戶尚未送出並阻擋離開頁面，以防進度流失

### 5. 個人設定（`/settings`）
* **功能**：
  * 修改姓名 / 頭像。
  * 顯示角色（學生 / 老師）。
    * 角色首次處註冊預設為學生
    * 老師需從後台，由初始的管理老師帳號根據 email 授予權限
  * 登出。

### 6. 權限管理頁面（`/permissions`）
* **功能**
    * 顯示用戶列表
        * 可搜尋用戶
        * 授予老師權限
        * 拔除老師權限
    * 僅老師身份可進入此頁面

## **T — Tech Stack（技術架構）**

* **前端**：Next.js
* **後端／資料庫**：Firebase（存放使用者、作業、繳交紀錄）
* **檔案儲存**：Firebase Storage
* **部署**：Zeabur
* **登入／權限**：Auth.js（原本為 NextJs） + Google OAuth
* **角色**：學生 / 老師（登入時判斷）
    * 系統自帶初始管理老師帳號
    * 老師可授予其他老師權限
