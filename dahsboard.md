# Vibe Coding èª²ç¨‹ç®¡ç†å¾Œå°ç³»çµ± - ç”¢å“éœ€æ±‚æ–‡æª” (PRD)

## æ–‡æª”ç‰ˆæœ¬
- **ç‰ˆæœ¬**: 1.0.0
- **æœ€å¾Œæ›´æ–°**: 2024-10-07
- **ä½œè€…**: Claude Code

---

## ç›®éŒ„
1. [ç”¢å“æ¦‚è¿°](#1-ç”¢å“æ¦‚è¿°)
2. [ç³»çµ±æ¶æ§‹](#2-ç³»çµ±æ¶æ§‹)
3. [æŠ€è¡“æ£§](#3-æŠ€è¡“æ£§)
4. [æ ¸å¿ƒåŠŸèƒ½æ¨¡å¡Š](#4-æ ¸å¿ƒåŠŸèƒ½æ¨¡å¡Š)
5. [æ•¸æ“šæ¨¡å‹](#5-æ•¸æ“šæ¨¡å‹)
6. [API è¦æ ¼](#6-api-è¦æ ¼)
7. [UI/UX è¨­è¨ˆè¦ç¯„](#7-uiux-è¨­è¨ˆè¦ç¯„)
8. [ç¬¬ä¸‰æ–¹é›†æˆ](#8-ç¬¬ä¸‰æ–¹é›†æˆ)
9. [ç’°å¢ƒé…ç½®](#9-ç’°å¢ƒé…ç½®)
10. [éƒ¨ç½²æŒ‡å—](#10-éƒ¨ç½²æŒ‡å—)

---

## 1. ç”¢å“æ¦‚è¿°

### 1.1 ç”¢å“å®šä½
Vibe Coding èª²ç¨‹ç®¡ç†å¾Œå°ç³»çµ±æ˜¯ä¸€å€‹å°ˆç‚ºç·šä¸Šèª²ç¨‹éŠ·å”®èˆ‡å­¸å“¡ç®¡ç†è¨­è¨ˆçš„å…¨åŠŸèƒ½ç®¡ç†å¹³å°ï¼Œæ•´åˆäº† LINE Bot è‡ªå‹•åŒ–è¨Šæ¯ç³»çµ±ã€ç”¨æˆ¶è¿½è¹¤ã€ä»˜æ¬¾ç®¡ç†èˆ‡æ•¸æ“šåˆ†æåŠŸèƒ½ã€‚

### 1.2 æ ¸å¿ƒåƒ¹å€¼
- **è‡ªå‹•åŒ–ç®¡ç†**: é€é LINE Bot è‡ªå‹•è™•ç†ç”¨æˆ¶äº’å‹•ã€å ±åæµç¨‹èˆ‡ä»˜æ¬¾ç¢ºèª
- **æ™ºèƒ½å†è¡ŒéŠ·**: åŸºæ–¼ç”¨æˆ¶è¡Œç‚ºçš„è‡ªå‹•åŒ–å†è¡ŒéŠ·ç³»çµ±ï¼Œæå‡è½‰æ›ç‡
- **æ•¸æ“šé©…å‹•**: å®Œæ•´çš„æ•¸æ“šè¿½è¹¤èˆ‡è¦–è¦ºåŒ–åˆ†æï¼Œå”åŠ©å„ªåŒ–éŠ·å”®ç­–ç•¥
- **é«˜æ•ˆæºé€š**: æ•´åˆèŠå¤©å®¤èˆ‡è¨Šæ¯æ¨æ’­åŠŸèƒ½ï¼Œå¯¦ç¾ä¸€å°ä¸€èˆ‡ç¾¤ç™¼è¨Šæ¯ç®¡ç†

### 1.3 ç›®æ¨™ç”¨æˆ¶
- èª²ç¨‹ç®¡ç†å“¡
- éŠ·å”®åœ˜éšŠ
- å®¢æœäººå“¡

---

## 2. ç³»çµ±æ¶æ§‹

### 2.1 æ•´é«”æ¶æ§‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend Layer                        â”‚
â”‚  Next.js 15 (App Router) + React + TypeScript + Tailwind   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Backend Layer                           â”‚
â”‚         Next.js API Routes + Server Actions                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Firebase       â”‚   LINE Messaging â”‚   Vercel Cron       â”‚
â”‚   Firestore      â”‚   API            â”‚   (Scheduled Jobs)  â”‚
â”‚   (Database)     â”‚   (Integration)  â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 è·¯ç”±çµæ§‹
```
/admin
  /login           â†’ ç®¡ç†å“¡ç™»å…¥é 
  /dashboard       â†’ ä¸»æ§åˆ¶å°ï¼ˆç”¨æˆ¶ç®¡ç†ã€æ•¸æ“šåˆ†æï¼‰
  /messages        â†’ è¨Šæ¯ç®¡ç†ä¸­å¿ƒ
  /chat            â†’ å³æ™‚èŠå¤©å®¤

/api/admin
  /auth
    /login         â†’ ç™»å…¥ API
    /logout        â†’ ç™»å‡º API
  /users           â†’ ç”¨æˆ¶åˆ—è¡¨èˆ‡ç¯©é¸
    /[userId]
      /activities           â†’ ç”¨æˆ¶æ´»å‹•è¨˜éŒ„
      /confirm-payment      â†’ ç¢ºèªä»˜æ¬¾
      /clear                â†’ æ¸…é™¤ç”¨æˆ¶è³‡æ–™
      /remarketing-history  â†’ å†è¡ŒéŠ·æ­·å²
  /messages
    /route         â†’ è¨Šæ¯åˆ—è¡¨
    /send          â†’ ç™¼é€è¨Šæ¯
  /chat
    /messages      â†’ èŠå¤©è¨Šæ¯ï¼ˆè®€å–èˆ‡ç™¼é€ï¼‰
  /analytics
    /daily-users   â†’ æ¯æ—¥ç”¨æˆ¶çµ±è¨ˆ
  /remarketing
    /templates     â†’ å†è¡ŒéŠ·ç¯„æœ¬
    /send          â†’ ç™¼é€å†è¡ŒéŠ·è¨Šæ¯
    /analytics     â†’ å†è¡ŒéŠ·åˆ†æ

/api/remarketing
  /rules           â†’ å†è¡ŒéŠ·è¦å‰‡ç®¡ç†ï¼ˆCRUDï¼‰
  /execute         â†’ åŸ·è¡Œå†è¡ŒéŠ·

/api/linebot
  /webhook         â†’ LINE Bot Webhook æ¥æ”¶è¨Šæ¯
  /test            â†’ æ¸¬è©¦ LINE Bot é€£ç·š

/api/marketing
  /schedule        â†’ è¡ŒéŠ·æ´»å‹•æ’ç¨‹
  /cron            â†’ Cron Job åŸ·è¡Œå†è¡ŒéŠ·
```

---

## 3. æŠ€è¡“æ£§

### 3.1 å‰ç«¯æŠ€è¡“
| æŠ€è¡“ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Next.js | 15.x | React æ¡†æ¶ï¼Œæ”¯æ´ SSR/SSG |
| React | 18.x | UI çµ„ä»¶åº« |
| TypeScript | 5.x | é¡å‹å®‰å…¨ |
| Tailwind CSS | 3.x | CSS æ¡†æ¶ |
| Lucide React | latest | Icon åœ–æ¨™åº« |
| ECharts for React | latest | æ•¸æ“šåœ–è¡¨è¦–è¦ºåŒ– |

### 3.2 å¾Œç«¯æŠ€è¡“
| æŠ€è¡“ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Next.js API Routes | 15.x | RESTful API |
| Firebase Admin SDK | latest | å¾Œç«¯ Firebase æ“ä½œ |
| @line/bot-sdk | latest | LINE Messaging API SDK |

### 3.3 æ•¸æ“šåº«
| æŠ€è¡“ | ç”¨é€” |
|------|------|
| Firebase Firestore | NoSQL æ•¸æ“šåº«ï¼Œå„²å­˜ç”¨æˆ¶è³‡æ–™ã€æ´»å‹•è¨˜éŒ„ã€å†è¡ŒéŠ·è¦å‰‡ |

### 3.4 éƒ¨ç½²å¹³å°
| å¹³å° | ç”¨é€” |
|------|------|
| Vercel | å‰ç«¯èˆ‡ API éƒ¨ç½²ã€Cron Jobs |

---

## 4. æ ¸å¿ƒåŠŸèƒ½æ¨¡å¡Š

### 4.1 èªè­‰ç³»çµ±

#### 4.1.1 åŠŸèƒ½æè¿°
- ç®¡ç†å“¡å¯†ç¢¼ç™»å…¥æ©Ÿåˆ¶
- Session ç®¡ç†ï¼ˆåŸºæ–¼ Cookieï¼‰
- å—ä¿è­·è·¯ç”±çš„ Middleware é©—è­‰

#### 4.1.2 ç™»å…¥æµç¨‹
1. ç”¨æˆ¶è¨ªå• `/admin/*` è·¯ç”±ï¼ˆé™¤äº† `/admin/login`ï¼‰
2. Middleware æª¢æŸ¥ `admin-auth` Cookie
3. è‹¥æœªç™»å…¥ï¼Œé‡å®šå‘è‡³ `/admin/login?from=[åŸå§‹è·¯å¾‘]`
4. è¼¸å…¥ç®¡ç†å“¡å¯†ç¢¼
5. é©—è­‰æˆåŠŸå¾Œè¨­ç½® Cookieï¼Œé‡å®šå‘å›åŸå§‹è·¯å¾‘

#### 4.1.3 å¯¦ä½œç´°ç¯€
- **å¯†ç¢¼å„²å­˜**: ç’°å¢ƒè®Šæ•¸ `ADMIN_PASSWORD`ï¼ˆé è¨­: `vibe-admin-2024`ï¼‰
- **Token æ ¼å¼**: Base64 ç·¨ç¢¼çš„ `admin:${ADMIN_PASSWORD}`
- **Cookie åç¨±**: `admin-auth`
- **Middleware è·¯å¾‘**: `/middleware.ts`

#### 4.1.4 é—œéµä»£ç¢¼æª”æ¡ˆ
- `app/admin/login/page.tsx` - ç™»å…¥é é¢
- `app/api/admin/auth/login/route.ts` - ç™»å…¥ API
- `app/api/admin/auth/logout/route.ts` - ç™»å‡º API
- `middleware.ts` - è·¯ç”±ä¿è­·

---

### 4.2 Dashboard ä¸»æ§åˆ¶å°

#### 4.2.1 åŠŸèƒ½æ¦‚è¿°
Dashboard æ˜¯ç³»çµ±çš„æ ¸å¿ƒé é¢ï¼Œæä¾›å®Œæ•´çš„ç”¨æˆ¶ç®¡ç†ã€æ•¸æ“šåˆ†æèˆ‡è¡ŒéŠ·åŠŸèƒ½ã€‚

#### 4.2.2 é é¢çµæ§‹
```
Dashboard (app/admin/dashboard/page.tsx)
â”œâ”€â”€ Header
â”‚   â”œâ”€â”€ Logo/Title
â”‚   â””â”€â”€ Logout Button
â”œâ”€â”€ Stats Cards (4 å€‹çµ±è¨ˆå¡ç‰‡)
â”‚   â”œâ”€â”€ ç¸½ç”¨æˆ¶æ•¸
â”‚   â”œâ”€â”€ æœ‰èˆˆè¶£äººæ•¸
â”‚   â”œâ”€â”€ å·²ç¹³è²»äººæ•¸
â”‚   â””â”€â”€ ç¸½ç‡Ÿæ”¶
â”œâ”€â”€ Tab Navigation
â”‚   â”œâ”€â”€ ç”¨æˆ¶ç®¡ç†
â”‚   â”œâ”€â”€ æ•¸æ“šåˆ†æ
â”‚   â”œâ”€â”€ å†è¡ŒéŠ·
â”‚   â””â”€â”€ ç¾¤ç™¼è¨Šæ¯
â””â”€â”€ Tab Content (æ ¹æ“šé¸ä¸­çš„ Tab é¡¯ç¤º)
```

#### 4.2.3 çµ±è¨ˆå¡ç‰‡è¨ˆç®—é‚è¼¯

##### ç¸½ç”¨æˆ¶æ•¸
```typescript
const totalUsers = users.filter(u => u.isFollowing).length
```
- **èªªæ˜**: çµ±è¨ˆæ‰€æœ‰è¿½è¹¤ï¼ˆæœªå°é–ï¼‰çš„ç”¨æˆ¶æ•¸é‡

##### æœ‰èˆˆè¶£äººæ•¸
```typescript
const activeUsers = users.filter(u => u.registrationStatus === 'interested').length
```
- **èªªæ˜**: çµ±è¨ˆå·²æŸ¥è©¢å ±åè³‡è¨Šä½†å°šæœªä»˜æ¬¾çš„ç”¨æˆ¶

##### å·²ç¹³è²»äººæ•¸
```typescript
const registeredUsers = users.filter(u =>
  u.registrationStatus === 'paid' || u.registrationStatus === 'confirmed'
).length
```
- **èªªæ˜**: çµ±è¨ˆå·²åŒ¯æ¬¾ï¼ˆå¾…ç¢ºèªæˆ–å·²ç¢ºèªï¼‰çš„ç”¨æˆ¶

##### ç¸½ç‡Ÿæ”¶
```typescript
const revenue = users.reduce((total, user) => {
  if (user.registrationStatus === 'confirmed' && user.paymentInfo?.amount) {
    return total + user.paymentInfo.amount
  }
  return total
}, 0)
```
- **èªªæ˜**: åƒ…è¨ˆç®—å·²ç¢ºèªæ”¶æ¬¾çš„é‡‘é¡ç¸½å’Œ

---

### 4.3 ç”¨æˆ¶ç®¡ç†ï¼ˆTab 1ï¼‰

#### 4.3.1 åŠŸèƒ½åˆ—è¡¨
- ç”¨æˆ¶åˆ—è¡¨å±•ç¤º
- ç”¨æˆ¶æœå°‹èˆ‡ç¯©é¸
- ç”¨æˆ¶ç‹€æ…‹ç®¡ç†
- ä»˜æ¬¾ç¢ºèª
- ç”¨æˆ¶æ´»å‹•æ­·å²æŸ¥çœ‹
- å†è¡ŒéŠ·æ­·å²æŸ¥çœ‹

#### 4.3.2 ç”¨æˆ¶åˆ—è¡¨ UI è¨­è¨ˆ

##### è¡¨æ ¼æ¬„ä½
| æ¬„ä½åç¨± | èªªæ˜ | é¡¯ç¤ºæ–¹å¼ |
|---------|------|---------|
| ç”¨æˆ¶åç¨± | LINE é¡¯ç¤ºåç¨± + é ­åƒ | é ­åƒ + æ–‡å­— |
| User ID | LINE User IDï¼ˆéƒ¨åˆ†éš±è—ï¼‰ | å‰ 8 ç¢¼ + ... + è¤‡è£½æŒ‰éˆ• |
| ç‹€æ…‹ | å ±åç‹€æ…‹ | Badgeï¼ˆé¡è‰²æ¨™ç¤ºï¼‰ |
| é‡‘é¡ | ä»˜æ¬¾é‡‘é¡ | NT$ æ ¼å¼ |
| ç¥¨ç¨® | ç¥¨åˆ¸é¡å‹ | æ–‡å­— |
| æœ€å¾Œæ´»å‹• | æœ€å¾Œäº’å‹•æ™‚é–“ | ç›¸å°æ™‚é–“ |
| æ“ä½œ | å¿«é€Ÿæ“ä½œæŒ‰éˆ• | æŒ‰éˆ•çµ„ |

##### ç‹€æ…‹ Badge é¡è‰²è¦ç¯„
```typescript
const statusColors = {
  'confirmed': 'bg-green-100 text-green-800',  // å·²ç¢ºèªæ”¶æ¬¾
  'paid': 'bg-yellow-100 text-yellow-800',     // å·²åŒ¯æ¬¾å¾…ç¢ºèª
  'interested': 'bg-blue-100 text-blue-800',   // æœ‰èˆˆè¶£
  'default': 'bg-gray-100 text-gray-800'       // å°šæœªé–‹å§‹
}
```

#### 4.3.3 ç¯©é¸åŠŸèƒ½

##### ç‹€æ…‹ç¯©é¸
- **å…¨éƒ¨**: é¡¯ç¤ºæ‰€æœ‰è¿½è¹¤ä¸­çš„ç”¨æˆ¶
- **å·²ç¢ºèª**: `registrationStatus === 'confirmed'`
- **å¾…ç¢ºèª**: `registrationStatus === 'paid'`
- **æœ‰èˆˆè¶£**: `registrationStatus === 'interested'`
- **å°šæœªé–‹å§‹**: æ²’æœ‰ `registrationStatus`

##### æœå°‹åŠŸèƒ½
- è¼¸å…¥æ¡†å³æ™‚æœå°‹
- æœå°‹æ¬„ä½: `displayName`ï¼ˆç”¨æˆ¶åç¨±ï¼‰
- ä¸å€åˆ†å¤§å°å¯«

#### 4.3.4 ä»˜æ¬¾ç¢ºèªåŠŸèƒ½

##### æµç¨‹åœ–
```
ç”¨æˆ¶é»æ“Šã€Œç¢ºèªæ”¶æ¬¾ã€
    â†“
å½ˆå‡ºä»˜æ¬¾ç¢ºèªå°è©±æ¡† (PaymentConfirmDialog)
    â†“
é¡¯ç¤ºç”¨æˆ¶è³‡è¨Šèˆ‡åŒ¯æ¬¾è³‡è¨Š
    â†“
ç®¡ç†å“¡è¼¸å…¥ç¢ºèªé‡‘é¡
    â†“
é¸æ“‡ç¥¨ç¨®ï¼ˆä¸€èˆ¬ç¥¨/é‚€è«‹ç¥¨/å…¬é—œç¥¨ï¼‰
    â†“
é»æ“Šã€Œç¢ºèªæ”¶æ¬¾ã€
    â†“
èª¿ç”¨ API: POST /api/admin/users/[userId]/confirm-payment
    â†“
æ›´æ–° Firestore ç”¨æˆ¶ç‹€æ…‹ç‚º 'confirmed'
    â†“
ç™¼é€ LINE ç¢ºèªè¨Šæ¯çµ¦ç”¨æˆ¶
    â†“
åˆ·æ–°ç”¨æˆ¶åˆ—è¡¨
```

##### ä»˜æ¬¾ç¢ºèªå°è©±æ¡† (PaymentConfirmDialog)
**çµ„ä»¶è·¯å¾‘**: `components/admin/PaymentConfirmDialog.tsx`

**Props**:
```typescript
interface PaymentConfirmDialogProps {
  isOpen: boolean
  user: User | null
  onClose: () => void
  onConfirm: (confirmedAmount: number) => Promise<void>
}
```

**UI å…ƒç´ **:
1. ç”¨æˆ¶è³‡è¨Šå€
   - ç”¨æˆ¶åç¨±
   - ç”¨æˆ¶ ID
   - ç”¨æˆ¶é ­åƒ

2. åŒ¯æ¬¾è³‡è¨Šå€
   - åŒ¯æ¬¾å¾Œäº”ç¢¼
   - ç”³å ±é‡‘é¡
   - åŒ¯æ¬¾æ™‚é–“

3. ç¥¨ç¨®é¸æ“‡
   - ä¸€èˆ¬ç¥¨ï¼ˆéœ€å¡«é‡‘é¡ï¼‰
   - é‚€è«‹ç¥¨ï¼ˆå…è²»ï¼‰
   - å…¬é—œç¥¨ï¼ˆå…è²»ï¼‰

4. é‡‘é¡è¼¸å…¥
   - é å¡«ç”¨æˆ¶ç”³å ±é‡‘é¡
   - å¯æ‰‹å‹•èª¿æ•´

5. æ“ä½œæŒ‰éˆ•
   - å–æ¶ˆ
   - ç¢ºèªæ”¶æ¬¾

##### ç¢ºèªè¨Šæ¯ç¯„æœ¬
```
ğŸ‰ æ­å–œï¼æ‚¨çš„å ±åå·²ç¢ºèªæˆåŠŸï¼ŒæœŸå¾…åœ¨èª²ç¨‹ä¸­è¦‹åˆ°æ‚¨ï¼

ğŸ“… èª²ç¨‹åç¨±ï¼šã€ŠVibe Coding å·¥ä½œè¡“ã€‹
ğŸ“… èª²ç¨‹æ—¥æœŸï¼š2025/10/12 æ•´æ—¥ç·šä¸‹å¤§èª² + å››é€±å¯¦æˆ°é™ªè·‘
ğŸ“ ä¸Šèª²åœ°é»ï¼šè‡ºåŒ—å¸‚ä¸­å±±å€æ°‘æ¬Šè¥¿è·¯20è™Ÿ 2æ¨“-204æˆ¿

âš ï¸ éº»ç…©åœ¨ã€Œ10/5ï¼ˆæ—¥ï¼‰ã€23:59 å‰å®Œæˆèª²å‰è¡¨å–®ï½
è£¡é¢æœ‰åŸºæœ¬è³‡æ–™ã€é£²é£Ÿéœ€æ±‚ã€äº¤é€šæ–¹å¼ï¼Œ
éœ€è¦å…ˆçµ±è¨ˆå¥½æ‰èƒ½å®‰æ’è¨‚é¤èˆ‡èª²ç¨‹æº–å‚™ ğŸ™

è¡¨å–®é€£çµï¼š
[èª²å‰è¡¨å–® URL]

é–‹èª²å‰ä¸€é€±æœƒç™¼é€è©³ç´°çš„è¡Œå‰é€šçŸ¥çµ¦æ‚¨ã€‚

å¦‚æœ‰ä»»ä½•å•é¡Œï¼Œæ­¡è¿éš¨æ™‚è©¢å•ï¼
```

#### 4.3.5 æ‰‹å‹•æ–°å¢ä»˜æ¬¾åŠŸèƒ½

##### ä½¿ç”¨å ´æ™¯
- ç”¨æˆ¶ç›´æ¥é€éå…¶ä»–ç®¡é“ä»˜æ¬¾ï¼ˆå¦‚ç¾å ´ã€ATM è½‰å¸³ä½†æœªå›å ±ï¼‰
- ç‰¹æ®Šå„ªæƒ æˆ–å…è²»ç¥¨ç¨®
- è£œç™»éºæ¼çš„ä»˜æ¬¾è¨˜éŒ„

##### æ“ä½œæµç¨‹
```
é»æ“Šã€Œæ‰‹å‹•æ–°å¢ä»˜æ¬¾ã€æŒ‰éˆ•
    â†“
é¸æ“‡ç”¨æˆ¶
    â†“
è¼¸å…¥é‡‘é¡
    â†“
é¸æ“‡ç¥¨ç¨®
    â†“
ç¢ºèª
    â†“
æ›´æ–°ç”¨æˆ¶ç‹€æ…‹ç‚º 'confirmed'
    â†“
ç™¼é€ç¢ºèªè¨Šæ¯
```

##### æ‰‹å‹•ä»˜æ¬¾å°è©±æ¡† (ManualPaymentDialog)
**çµ„ä»¶è·¯å¾‘**: `components/admin/ManualPaymentDialog.tsx`

**åŠŸèƒ½**:
- ç”¨æˆ¶é¸æ“‡å™¨ï¼ˆä¸‹æ‹‰é¸å–®æˆ–æœå°‹ï¼‰
- é‡‘é¡è¼¸å…¥
- ç¥¨ç¨®é¸æ“‡
- å‚™è¨»æ¬„ä½ï¼ˆé¸å¡«ï¼‰

---

### 4.4 æ•¸æ“šåˆ†æï¼ˆTab 2ï¼‰

#### 4.4.1 åŠŸèƒ½æ¦‚è¿°
æä¾›è¦–è¦ºåŒ–çš„æ•¸æ“šåˆ†æå·¥å…·ï¼Œå”åŠ©ç®¡ç†å“¡äº†è§£éŠ·å”®æ¼æ–—ã€ç”¨æˆ¶è¡Œç‚ºèˆ‡è½‰æ›ç‡ã€‚

#### 4.4.2 åˆ†æçµ„ä»¶

##### 4.4.2.1 éŠ·å”®æ¼æ–—åœ– (SalesFunnel)
**çµ„ä»¶è·¯å¾‘**: `components/admin/SalesFunnelBar.tsx`

**è³‡æ–™è¨ˆç®—**:
```typescript
const funnelData = [
  {
    stage: 'ç”¨æˆ¶æ•¸',
    value: users.filter(u => u.isFollowing).length
  },
  {
    stage: 'æœ‰èˆˆè¶£',
    value: users.filter(u => u.registrationStatus === 'interested').length
  },
  {
    stage: 'å·²è½‰æ›',
    value: users.filter(u =>
      u.registrationStatus === 'paid' || u.registrationStatus === 'confirmed'
    ).length
  }
]
```

**è¦–è¦ºåŒ–**:
- ä½¿ç”¨ ECharts æ¼æ–—åœ–
- é¡è‰²: è—è‰² â†’ ç¶ è‰² â†’ é‡‘è‰²
- é¡¯ç¤ºç™¾åˆ†æ¯”èˆ‡å¯¦éš›æ•¸å­—

**è½‰æ›ç‡è¨ˆç®—**:
```typescript
// éšæ®µè½‰æ›ç‡
const stageConversionRate = (nextStage / currentStage) * 100

// æµå¤±ç‡
const dropoffRate = ((currentStage - nextStage) / currentStage) * 100

// ç¸½é«”è½‰æ›ç‡
const overallConversionRate = (finalStage / initialStage) * 100
```

**å„ªåŒ–å»ºè­°**:
- è‡ªå‹•åˆ†ææœ€å¤§æµå¤±éšæ®µ
- æä¾›æ”¹å–„å»ºè­°
- æ¨™ç¤ºé—œéµæŒ‡æ¨™

##### 4.4.2.2 ç”¨æˆ¶ç‹€æ…‹åœ“é¤…åœ– (UserStatusPieChart)
**çµ„ä»¶è·¯å¾‘**: `components/admin/UserStatusPieChart.tsx`

**è³‡æ–™åˆ†é¡**:
```typescript
const statusDistribution = {
  'confirmed': users.filter(u => u.registrationStatus === 'confirmed').length,
  'paid': users.filter(u => u.registrationStatus === 'paid').length,
  'interested': users.filter(u => u.registrationStatus === 'interested').length,
  'no_action': users.filter(u => !u.registrationStatus && u.isFollowing).length
}
```

**è¦–è¦ºåŒ–**:
- ECharts åœ“é¤…åœ–
- é¡è‰²å°æ‡‰ç‹€æ…‹ Badge
- é¡¯ç¤ºç™¾åˆ†æ¯”èˆ‡æ•¸é‡

##### 4.4.2.3 æ¯æ—¥ç”¨æˆ¶çµ±è¨ˆ (DailyUserStats)
**çµ„ä»¶è·¯å¾‘**: `components/admin/DailyUserStats.tsx`

**åŠŸèƒ½**:
- é¡¯ç¤ºéå» 30 å¤©æ¯æ—¥æ–°å¢ç”¨æˆ¶æ•¸
- æŠ˜ç·šåœ–å±•ç¤ºè¶¨å‹¢
- æ¨™ç¤ºé‡è¦æ—¥æœŸï¼ˆå¦‚è¡ŒéŠ·æ´»å‹•æ—¥ï¼‰

**è³‡æ–™ä¾†æº**:
- API: `/api/admin/analytics/daily-users`
- æŸ¥è©¢ Firestore `users` collection çš„ `followedAt` æ¬„ä½
- æŒ‰æ—¥æœŸåˆ†çµ„çµ±è¨ˆ

---

### 4.5 å†è¡ŒéŠ·ç³»çµ±ï¼ˆTab 3ï¼‰

#### 4.5.1 åŠŸèƒ½æ¦‚è¿°
è‡ªå‹•åŒ–çš„å†è¡ŒéŠ·ç³»çµ±ï¼Œæ ¹æ“šç”¨æˆ¶è¡Œç‚ºèˆ‡æ™‚é–“è§¸ç™¼æ¢ä»¶ï¼Œè‡ªå‹•ç™¼é€ç²¾æº–çš„è¡ŒéŠ·è¨Šæ¯ã€‚

#### 4.5.2 å†è¡ŒéŠ·è¦å‰‡ç®¡ç†

##### è¦å‰‡æ•¸æ“šçµæ§‹
```typescript
interface RemarketingRule {
  id: string
  name: string                    // è¦å‰‡åç¨±
  description: string             // è¦å‰‡èªªæ˜
  triggerDays: number             // åŠ å…¥å¾Œå¹¾å¤©è§¸ç™¼
  targetConditions: {
    hasInteracted: boolean        // æ˜¯å¦æœ‰äº’å‹•é
    registrationStatus?: string[] // ç›®æ¨™è¨»å†Šç‹€æ…‹
    notInStatus?: string[]        // æ’é™¤çš„ç‹€æ…‹
  }
  messageTemplate: string         // è¨Šæ¯æ¨¡æ¿ ID
  customMessage?: string          // è‡ªè¨‚è¨Šæ¯å…§å®¹
  isActive: boolean               // æ˜¯å¦å•Ÿç”¨
  createdAt: Date                 // å»ºç«‹æ™‚é–“
  lastExecuted?: Date             // æœ€å¾ŒåŸ·è¡Œæ™‚é–“
}
```

##### é è¨­è¦å‰‡
ç³»çµ±å…§å»º 5 å€‹é è¨­è¦å‰‡ï¼ˆå¯åœ¨ `lib/line/remarketingService.ts` æŸ¥çœ‹ï¼‰:

1. **ç¬¬ 1 å¤© - æ­¡è¿æé†’**
   - è§¸ç™¼æ™‚é–“: åŠ å…¥å¾Œ 1 å¤©
   - ç›®æ¨™: æœªäº’å‹•ä¸”æœªä»˜æ¬¾çš„ç”¨æˆ¶
   - è¨Šæ¯: æ­¡è¿ + èª²ç¨‹ä»‹ç´¹

2. **ç¬¬ 3 å¤© - èª²ç¨‹åƒ¹å€¼æé†’**
   - è§¸ç™¼æ™‚é–“: åŠ å…¥å¾Œ 3 å¤©
   - ç›®æ¨™: å·²äº’å‹•ä½†æœªä»˜æ¬¾çš„ç”¨æˆ¶
   - è¨Šæ¯: å­¸å“¡è¦‹è­‰ + åƒ¹å€¼å¼·èª¿

3. **ç¬¬ 5 å¤© - å„ªæƒ å³å°‡çµæŸ**
   - è§¸ç™¼æ™‚é–“: åŠ å…¥å¾Œ 5 å¤©
   - ç›®æ¨™: æœ‰èˆˆè¶£ä½†æœªä»˜æ¬¾çš„ç”¨æˆ¶
   - è¨Šæ¯: å„ªæƒ å€’æ•¸ + æ€¥è¿«æ„Ÿ

4. **ç¬¬ 7 å¤© - æœ€å¾Œæ©Ÿæœƒ**
   - è§¸ç™¼æ™‚é–“: åŠ å…¥å¾Œ 7 å¤©
   - ç›®æ¨™: æ‰€æœ‰æœªä»˜æ¬¾ç”¨æˆ¶
   - è¨Šæ¯: æœ€å¾Œå¬å›

5. **ä»˜æ¬¾æé†’ - 24 å°æ™‚**
   - è§¸ç™¼æ™‚é–“: æŸ¥è©¢å ±åå¾Œ 1 å¤©
   - ç›®æ¨™: æœ‰èˆˆè¶£ä½†æœªä»˜æ¬¾
   - è¨Šæ¯: ä»˜æ¬¾æé†’

#### 4.5.3 è¦å‰‡ CRUD æ“ä½œ

##### æ–°å¢è¦å‰‡
**UI æµç¨‹**:
```
é»æ“Šã€Œæ–°å¢è¦å‰‡ã€æŒ‰éˆ•
    â†“
å±•é–‹è¡¨å–®
    â†“
å¡«å¯«è¦å‰‡è³‡è¨Š
  - è¦å‰‡åç¨±ï¼ˆå¿…å¡«ï¼‰
  - è¦å‰‡èªªæ˜ï¼ˆå¿…å¡«ï¼‰
  - è§¸ç™¼å¤©æ•¸ï¼ˆå¿…å¡«ï¼Œæ•¸å­—ï¼‰
  - ç›®æ¨™æ¢ä»¶
    - æ˜¯å¦éœ€è¦äº’å‹•
    - åŒ…å«ç‹€æ…‹ï¼ˆå¤šé¸ï¼‰
    - æ’é™¤ç‹€æ…‹ï¼ˆå¤šé¸ï¼‰
  - è¨Šæ¯æ¨¡æ¿é¸æ“‡æˆ–è‡ªè¨‚è¨Šæ¯
  - æ˜¯å¦ç«‹å³å•Ÿç”¨
    â†“
é»æ“Šã€Œå„²å­˜ã€
    â†“
POST /api/remarketing/rules
    â†“
å„²å­˜è‡³ Firestore `remarketingRules` collection
    â†“
åˆ·æ–°è¦å‰‡åˆ—è¡¨
```

##### ç·¨è¼¯è¦å‰‡
**UI æµç¨‹**:
```
é»æ“Šè¦å‰‡å¡ç‰‡çš„ã€Œç·¨è¼¯ã€æŒ‰éˆ•
    â†“
é€²å…¥ç·¨è¼¯æ¨¡å¼ï¼ˆinline editingï¼‰
    â†“
ä¿®æ”¹è¦å‰‡æ¬„ä½
    â†“
é»æ“Šã€Œå„²å­˜ã€
    â†“
PUT /api/remarketing/rules
    â†“
æ›´æ–° Firestore
    â†“
åˆ·æ–°è¦å‰‡åˆ—è¡¨
```

##### åˆªé™¤è¦å‰‡
**UI æµç¨‹**:
```
é»æ“Šè¦å‰‡å¡ç‰‡çš„ã€Œåˆªé™¤ã€æŒ‰éˆ•
    â†“
é¡¯ç¤ºç¢ºèªå°è©±æ¡†
    â†“
ç¢ºèªåˆªé™¤
    â†“
DELETE /api/remarketing/rules?id=[ruleId]
    â†“
å¾ Firestore åˆªé™¤
    â†“
åˆ·æ–°è¦å‰‡åˆ—è¡¨
```

##### å•Ÿç”¨/åœç”¨è¦å‰‡
**UI æµç¨‹**:
```
é»æ“Šè¦å‰‡å¡ç‰‡çš„åˆ‡æ›é–‹é—œ
    â†“
PUT /api/remarketing/rules
    â†“
æ›´æ–° isActive æ¬„ä½
    â†“
ç«‹å³ç”Ÿæ•ˆï¼ˆä¸‹æ¬¡ Cron Job åŸ·è¡Œæ™‚æœƒè®€å–æ–°ç‹€æ…‹ï¼‰
```

#### 4.5.4 å†è¡ŒéŠ·åŸ·è¡Œæ©Ÿåˆ¶

##### åŸ·è¡Œæ–¹å¼
1. **è‡ªå‹•åŸ·è¡Œï¼ˆCron Jobï¼‰**
   - Vercel Cron Job æ¯å¤© 09:00 åŸ·è¡Œ
   - è·¯ç”±: `/api/marketing/cron`
   - é…ç½®æ–¼ `vercel.json`

2. **æ‰‹å‹•åŸ·è¡Œ**
   - Dashboard é»æ“Šã€Œç«‹å³åŸ·è¡Œã€æŒ‰éˆ•
   - è·¯ç”±: `POST /api/remarketing/execute`

##### åŸ·è¡Œæµç¨‹
```
é–‹å§‹åŸ·è¡Œ
    â†“
æª¢æŸ¥ç’°å¢ƒè®Šæ•¸ ENABLE_AUTO_REMARKETING
    â†“
è¼‰å…¥æ‰€æœ‰ isActive = true çš„è¦å‰‡
    â†“
å°æ¯å€‹è¦å‰‡:
  â”œâ”€ è¨ˆç®—ç›®æ¨™æ—¥æœŸï¼ˆä»Šå¤© - triggerDaysï¼‰
  â”œâ”€ æŸ¥è©¢ç¬¦åˆæ¢ä»¶çš„ç”¨æˆ¶
  â”‚   - followedAt åœ¨ç›®æ¨™æ—¥æœŸç¯„åœ
  â”‚   - isFollowing = true
  â”‚   - ç¬¦åˆ targetConditions
  â”œâ”€ æª¢æŸ¥è©²ç”¨æˆ¶æ˜¯å¦å·²æ”¶éæ­¤è¦å‰‡è¨Šæ¯ï¼ˆæŸ¥ remarketingLogsï¼‰
  â”œâ”€ è‹¥æœªæ”¶é:
  â”‚   â”œâ”€ å–å¾—è¨Šæ¯æ¨¡æ¿
  â”‚   â”œâ”€ å€‹äººåŒ–è¨Šæ¯ï¼ˆæ›¿æ›è®Šæ•¸ï¼‰
  â”‚   â”œâ”€ ç™¼é€ LINE è¨Šæ¯
  â”‚   â””â”€ è¨˜éŒ„è‡³ remarketingLogs
  â””â”€ æ›´æ–°è¦å‰‡çš„ lastExecuted æ™‚é–“
    â†“
å›å‚³åŸ·è¡Œçµæœ
  - ç¸½è™•ç†æ•¸
  - æˆåŠŸæ•¸
  - å¤±æ•—æ•¸
  - è©³ç´° log
```

##### è¨Šæ¯æ¨¡æ¿è®Šæ•¸æ›¿æ›
```typescript
const personalizedMessage = template
  .replace(/\{\{userId\}\}/g, user.userId)
  .replace(/\{\{userName\}\}/g, user.displayName)
  .replace(/\{\{name\}\}/g, user.displayName)
  .replace(/\{\{displayName\}\}/g, user.displayName)
```

#### 4.5.5 å†è¡ŒéŠ·åˆ†æ (RemarketingAnalytics)
**çµ„ä»¶è·¯å¾‘**: `components/admin/RemarketingAnalytics.tsx`

**åŠŸèƒ½**:
- å„è¦å‰‡ç™¼é€çµ±è¨ˆ
- æˆåŠŸç‡åˆ†æ
- æ™‚é–“è¶¨å‹¢åœ–
- ROI è¨ˆç®—ï¼ˆè‹¥æœ‰è½‰æ›è¿½è¹¤ï¼‰

**è³‡æ–™ä¾†æº**:
- API: `/api/admin/remarketing/analytics`
- æŸ¥è©¢ `remarketingLogs` collection

---

### 4.6 ç¾¤ç™¼è¨Šæ¯ï¼ˆTab 4ï¼‰

#### 4.6.1 åŠŸèƒ½æ¦‚è¿°
å…è¨±ç®¡ç†å“¡å‘ç‰¹å®šç¾¤çµ„çš„ç”¨æˆ¶ç™¼é€å¤§é‡è¨Šæ¯ï¼Œä¸¦æä¾›æ¸¬è©¦ç™¼é€åŠŸèƒ½ã€‚

#### 4.6.2 UI çµæ§‹
```
ç¾¤ç™¼è¨Šæ¯ Tab
â”œâ”€â”€ è¨Šæ¯å…§å®¹å€
â”‚   â”œâ”€â”€ è¨Šæ¯ç·¨è¼¯å™¨ï¼ˆTextareaï¼‰
â”‚   â”œâ”€â”€ è®Šæ•¸æç¤º
â”‚   â”‚   - {{userName}}: ç”¨æˆ¶åç¨±
â”‚   â”‚   - {{userId}}: ç”¨æˆ¶ ID
â”‚   â””â”€â”€ å­—æ•¸çµ±è¨ˆ
â”œâ”€â”€ ç›®æ¨™é¸æ“‡
â”‚   â”œâ”€â”€ å…¨éƒ¨å¥½å‹
â”‚   â”œâ”€â”€ å·²ç¢ºèªæ”¶æ¬¾
â”‚   â””â”€â”€ å·²ç¹³è²»ï¼ˆå«å¾…ç¢ºèªå’Œå·²ç¢ºèªï¼‰
â”œâ”€â”€ ç›®æ¨™ç”¨æˆ¶çµ±è¨ˆ
â”‚   - é¡¯ç¤ºç¬¦åˆæ¢ä»¶çš„ç”¨æˆ¶æ•¸é‡
â”œâ”€â”€ æ“ä½œæŒ‰éˆ•
â”‚   â”œâ”€â”€ æ¸¬è©¦ç™¼é€ï¼ˆé–‹å•Ÿæ¸¬è©¦å°è©±æ¡†ï¼‰
â”‚   â””â”€â”€ æ­£å¼ç¾¤ç™¼
â””â”€â”€ è¨Šæ¯ç¯„æœ¬åº«ï¼ˆå¯é¸ï¼‰
    - é è¨­å¸¸ç”¨è¨Šæ¯ç¯„æœ¬
```

#### 4.6.3 æ¸¬è©¦ç™¼é€åŠŸèƒ½

##### æ¸¬è©¦å°è©±æ¡†
**åŠŸèƒ½**:
- å¾ç”¨æˆ¶åˆ—è¡¨é¸æ“‡ 1-5 ä½æ¸¬è©¦ç”¨æˆ¶
- é è¦½å°‡ç™¼é€çš„è¨Šæ¯ï¼ˆå«è®Šæ•¸æ›¿æ›ï¼‰
- ç¢ºèªå¾Œåƒ…ç™¼é€çµ¦é¸ä¸­çš„æ¸¬è©¦ç”¨æˆ¶

##### æµç¨‹
```
é»æ“Šã€Œæ¸¬è©¦ç™¼é€ã€
    â†“
å½ˆå‡ºæ¸¬è©¦å°è©±æ¡†
    â†“
é¡¯ç¤ºæ‰€æœ‰ç”¨æˆ¶åˆ—è¡¨
    â†“
å‹¾é¸æ¸¬è©¦ç”¨æˆ¶ï¼ˆCheckboxï¼‰
    â†“
é¡¯ç¤ºç™¼é€é è¦½
    â†“
é»æ“Šã€Œç™¼é€æ¸¬è©¦è¨Šæ¯ã€
    â†“
é€ä¸€ç™¼é€çµ¦é¸ä¸­ç”¨æˆ¶
    â†“
é¡¯ç¤ºç™¼é€çµæœï¼ˆæˆåŠŸ X ä½ / å¤±æ•— Y ä½ï¼‰
```

#### 4.6.4 æ­£å¼ç¾¤ç™¼æµç¨‹
```
å¡«å¯«è¨Šæ¯å…§å®¹
    â†“
é¸æ“‡ç›®æ¨™ç¾¤çµ„
    â†“
é»æ“Šã€Œç¾¤ç™¼è¨Šæ¯ã€
    â†“
é¡¯ç¤ºç¢ºèªå°è©±æ¡†
  - ç›®æ¨™ç¾¤çµ„åç¨±
  - ç›®æ¨™ç”¨æˆ¶æ•¸é‡
  - è¨Šæ¯é è¦½
    â†“
ç¢ºèªå¾Œé–‹å§‹ç™¼é€
    â†“
é¡¯ç¤ºé€²åº¦æ¢
    â†“
é€ä¸€ç™¼é€ï¼ˆå«è®Šæ•¸æ›¿æ›ï¼‰
    â†“
å®Œæˆå¾Œé¡¯ç¤ºçµæœ
  - ç¸½è¨ˆç™¼é€æ•¸
  - æˆåŠŸæ•¸
  - å¤±æ•—æ•¸
  - å¤±æ•—ç”¨æˆ¶åˆ—è¡¨ï¼ˆè‹¥æœ‰ï¼‰
```

#### 4.6.5 ç™¼é€é™åˆ¶èˆ‡å®‰å…¨æ©Ÿåˆ¶
- **é€Ÿç‡é™åˆ¶**: æ¯ç§’æœ€å¤š 5 å‰‡è¨Šæ¯ï¼ˆé¿å… LINE API é™åˆ¶ï¼‰
- **å¤±æ•—é‡è©¦**: å¤±æ•—è¨Šæ¯ä¸è‡ªå‹•é‡è©¦ï¼ˆè¨˜éŒ„åˆ° logï¼‰
- **å–æ¶ˆç™¼é€**: ç™¼é€éç¨‹ä¸­å¯ä¸­æ–·ï¼ˆå·²ç™¼é€çš„ç„¡æ³•æ’¤å›ï¼‰

---

### 4.7 è¨Šæ¯ç®¡ç†ä¸­å¿ƒ

#### 4.7.1 åŠŸèƒ½æ¦‚è¿°
**è·¯ç”±**: `/admin/messages`

æä¾›å®Œæ•´çš„è¨Šæ¯ç™¼é€èˆ‡ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…å«å€‹åˆ¥ç™¼é€ã€ç¾¤ç™¼ã€è¨Šæ¯æ­·å²èˆ‡çµ±è¨ˆåˆ†æã€‚

#### 4.7.2 é é¢çµæ§‹
```
è¨Šæ¯ç®¡ç†ä¸­å¿ƒ
â”œâ”€â”€ Tab Navigation
â”‚   â”œâ”€â”€ ç™¼é€è¨Šæ¯
â”‚   â”œâ”€â”€ è¨Šæ¯ç´€éŒ„
â”‚   â””â”€â”€ çµ±è¨ˆåˆ†æ
â””â”€â”€ Tab Content
```

#### 4.7.3 ç™¼é€è¨Šæ¯ Tab

##### UI Layout
```
â”œâ”€â”€ å·¦å´å€åŸŸï¼ˆ2/3 å¯¬åº¦ï¼‰
â”‚   â”œâ”€â”€ è¨Šæ¯é¡å‹é¸æ“‡
â”‚   â”‚   â”œâ”€â”€ å€‹åˆ¥ç™¼é€
â”‚   â”‚   â””â”€â”€ ç¾¤ç™¼è¨Šæ¯
â”‚   â”œâ”€â”€ ç”¨æˆ¶é¸æ“‡å™¨ï¼ˆåƒ…å€‹åˆ¥ç™¼é€é¡¯ç¤ºï¼‰
â”‚   â”‚   â”œâ”€â”€ æœå°‹æ¡†
â”‚   â”‚   â””â”€â”€ ç”¨æˆ¶åˆ—è¡¨ï¼ˆå¯é¸æ“‡ï¼‰
â”‚   â””â”€â”€ è¨Šæ¯ç·¨è¼¯å™¨
â”‚       â”œâ”€â”€ Textarea
â”‚       â”œâ”€â”€ å­—æ•¸çµ±è¨ˆ
â”‚       â””â”€â”€ ç™¼é€æŒ‰éˆ•
â””â”€â”€ å³å´å€åŸŸï¼ˆ1/3 å¯¬åº¦ï¼‰
    â””â”€â”€ è¨Šæ¯ç¯„æœ¬åº«
        - æ—©é³¥å„ªæƒ æé†’
        - èª²ç¨‹é–‹å§‹æé†’
        - åŒ¯æ¬¾æé†’
        - èª²ç¨‹è³‡æºåˆ†äº«
```

##### è¨Šæ¯ç¯„æœ¬
ç³»çµ±é è¨­ 4 å€‹è¨Šæ¯ç¯„æœ¬ï¼ˆå®šç¾©æ–¼ `app/admin/messages/page.tsx`ï¼‰:

1. **æ—©é³¥å„ªæƒ æé†’**
```
ğŸ”¥ æ—©é³¥å„ªæƒ æœ€å¾Œå€’æ•¸ï¼

ã€ŠVibe Coding å·¥ä½œè¡“ã€‹èª²ç¨‹æ—©é³¥å„ªæƒ å³å°‡çµæŸï¼ŒæŠŠæ¡æœ€å¾Œæ©Ÿæœƒäº«å— NT$ 3,000 çš„å„ªæƒ åƒ¹æ ¼ï¼

åŸåƒ¹ NT$ 4,500ï¼Œç¾åœ¨å ±åç«‹çœ NT$ 1,500ï¼

è¼¸å…¥ã€Œå ±åã€ç«‹å³é–‹å§‹å ±åæµç¨‹ ğŸ‘‰
```

2. **èª²ç¨‹é–‹å§‹æé†’**
```
ğŸ“š èª²ç¨‹å³å°‡é–‹å§‹ï¼

è¦ªæ„›çš„å­¸å“¡æ‚¨å¥½ï¼Œ

ã€ŠVibe Coding å·¥ä½œè¡“ã€‹å°‡æ–¼ 2025/10/12 é–‹èª²ï¼Œè«‹è¨˜å¾—æº–æ™‚åƒåŠ ï¼

ğŸ“ åœ°é»ï¼šè‡ºåŒ—å¸‚ä¸­å±±å€æ°‘æ¬Šè¥¿è·¯20è™Ÿ 2æ¨“-204æˆ¿
â° æ™‚é–“ï¼šæ•´æ—¥èª²ç¨‹

æœŸå¾…èˆ‡æ‚¨è¦‹é¢ï¼
```

3. **åŒ¯æ¬¾æé†’**
```
ğŸ’³ åŒ¯æ¬¾æé†’

æ‚¨å¥½ï¼æˆ‘å€‘æ³¨æ„åˆ°æ‚¨å°èª²ç¨‹æœ‰èˆˆè¶£ä½†å°šæœªå®ŒæˆåŒ¯æ¬¾ã€‚

åŒ¯æ¬¾è³‡è¨Šï¼š
éŠ€è¡Œï¼šç‰å±±éŠ€è¡Œ (808)
æˆ¶åï¼šé™³å¨é”
å¸³è™Ÿï¼š0370968229188
é‡‘é¡ï¼šNT$ 3,000ï¼ˆè¶…æ—©é³¥å„ªæƒ åƒ¹ï¼‰

å®ŒæˆåŒ¯æ¬¾å¾Œè«‹å›å‚³å¾Œäº”ç¢¼ï¼Œè¬è¬ï¼
```

4. **èª²ç¨‹è³‡æºåˆ†äº«**
```
ğŸ“š æœ¬é€±å­¸ç¿’è³‡æº

ç‚ºæ‚¨æº–å‚™äº†æœ¬é€±çš„å­¸ç¿’è³‡æºï¼š

1. JavaScript åŸºç¤æ•™å­¸å½±ç‰‡
2. å¯¦æˆ°ç¯„ä¾‹ç¨‹å¼ç¢¼
3. ä½œæ¥­ç·´ç¿’é¡Œ

è«‹è‡³èª²ç¨‹å¹³å°æŸ¥çœ‹è©³ç´°å…§å®¹ï¼

æœ‰ä»»ä½•å•é¡Œæ­¡è¿éš¨æ™‚è©¢å• ğŸ˜Š
```

#### 4.7.4 è¨Šæ¯ç´€éŒ„ Tab

##### åŠŸèƒ½
- é¡¯ç¤ºæ‰€æœ‰å·²ç™¼é€çš„è¨Šæ¯æ­·å²
- ç¯©é¸èˆ‡æœå°‹
- è¨Šæ¯ç‹€æ…‹è¿½è¹¤

##### è¡¨æ ¼æ¬„ä½
| æ¬„ä½ | èªªæ˜ | è³‡æ–™ä¾†æº |
|------|------|---------|
| æ™‚é–“ | ç™¼é€æ™‚é–“ | `sentAt` |
| é¡å‹ | å€‹åˆ¥/ç¾¤ç™¼ | `type` |
| æ¥æ”¶è€… | ç”¨æˆ¶åç¨±æˆ–ã€Œæ‰€æœ‰ç”¨æˆ¶ã€ | `recipientName` |
| å…§å®¹ | è¨Šæ¯å…§å®¹ï¼ˆæ‘˜è¦ï¼‰ | `content` |
| ç‹€æ…‹ | å·²ç™¼é€/å¤±æ•—/å¾…ç™¼é€ | `status` |

##### ç‹€æ…‹ Badge
```typescript
const statusBadge = {
  'sent': 'bg-green-100 text-green-800',
  'failed': 'bg-red-100 text-red-800',
  'pending': 'bg-yellow-100 text-yellow-800'
}
```

#### 4.7.5 çµ±è¨ˆåˆ†æ Tab

##### çµ±è¨ˆå¡ç‰‡
1. **ç¸½ç™¼é€è¨Šæ¯**
   - ç´¯è¨ˆæ‰€æœ‰è¨Šæ¯æ•¸é‡

2. **ä»Šæ—¥ç™¼é€**
   - ä»Šå¤©ç™¼é€çš„è¨Šæ¯æ•¸é‡

3. **æˆåŠŸç‡**
   - (æˆåŠŸè¨Šæ¯æ•¸ / ç¸½è¨Šæ¯æ•¸) Ã— 100%

##### ç™¼é€è¶¨å‹¢åœ–ï¼ˆé–‹ç™¼ä¸­ï¼‰
- éå» 30 å¤©æ¯æ—¥ç™¼é€é‡
- æŠ˜ç·šåœ–å±•ç¤º

---

### 4.8 å³æ™‚èŠå¤©å®¤

#### 4.8.1 åŠŸèƒ½æ¦‚è¿°
**è·¯ç”±**: `/admin/chat`

æä¾›é¡ä¼¼ LINE å®˜æ–¹å¸³è™Ÿç®¡ç†å“¡ä»‹é¢çš„èŠå¤©åŠŸèƒ½ï¼Œå¯¦ç¾ä¸€å°ä¸€å³æ™‚æºé€šã€‚

#### 4.8.2 é é¢çµæ§‹
```
èŠå¤©å®¤
â”œâ”€â”€ å·¦å´é‚Šæ¬„ï¼ˆç”¨æˆ¶åˆ—è¡¨ï¼‰
â”‚   â”œâ”€â”€ Header
â”‚   â”‚   â”œâ”€â”€ æ¨™é¡Œã€ŒèŠå¤©å®¤ã€
â”‚   â”‚   â”œâ”€â”€ æœå°‹æ¡†
â”‚   â”‚   â””â”€â”€ æ¨™ç±¤ç¯©é¸ï¼ˆå…¨éƒ¨/å·²ä»˜æ¬¾/æœ‰èˆˆè¶£ï¼‰
â”‚   â””â”€â”€ ç”¨æˆ¶åˆ—è¡¨
â”‚       - ç”¨æˆ¶é ­åƒ
â”‚       - ç”¨æˆ¶åç¨±
â”‚       - æœ€å¾Œè¨Šæ¯é è¦½
â”‚       - æœ€å¾Œè¨Šæ¯æ™‚é–“
â”‚       - æœªè®€è¨ˆæ•¸ï¼ˆç´…é»ï¼‰
â”œâ”€â”€ ä¸­é–“å€åŸŸï¼ˆèŠå¤©è¦–çª—ï¼‰
â”‚   â”œâ”€â”€ èŠå¤© Header
â”‚   â”‚   â”œâ”€â”€ ç”¨æˆ¶è³‡è¨Š
â”‚   â”‚   â””â”€â”€ æ“ä½œæŒ‰éˆ•ï¼ˆæŸ¥çœ‹è³‡è¨Š/æ¨™è¨˜/å°å­˜ï¼‰
â”‚   â”œâ”€â”€ è¨Šæ¯å€åŸŸ
â”‚   â”‚   - è¨Šæ¯æ°£æ³¡
â”‚   â”‚   - æ™‚é–“æˆ³è¨˜
â”‚   â”‚   - å·²è®€ç‹€æ…‹ï¼ˆç®¡ç†å“¡è¨Šæ¯ï¼‰
â”‚   â”‚   - Typing Indicator
â”‚   â”œâ”€â”€ å¿«é€Ÿå›è¦†
â”‚   â”‚   - å¸¸ç”¨å›è¦†æŒ‰éˆ•
â”‚   â””â”€â”€ è¼¸å…¥å€
â”‚       â”œâ”€â”€ é™„ä»¶æŒ‰éˆ•
â”‚       â”œâ”€â”€ åœ–ç‰‡æŒ‰éˆ•
â”‚       â”œâ”€â”€ Textarea
â”‚       â”œâ”€â”€ Emoji æŒ‰éˆ•
â”‚       â””â”€â”€ ç™¼é€æŒ‰éˆ•
â””â”€â”€ å³å´é‚Šæ¬„ï¼ˆç”¨æˆ¶è³‡è¨Šï¼‰- å¯å±•é–‹
    â”œâ”€â”€ ç”¨æˆ¶é ­åƒèˆ‡åç¨±
    â”œâ”€â”€ LINE ID
    â”œâ”€â”€ æ¨™ç±¤ç®¡ç†
    â”œâ”€â”€ ç­†è¨˜æ¬„
    â””â”€â”€ æ­·å²çµ±è¨ˆ
```

#### 4.8.3 è¨Šæ¯æ°£æ³¡è¨­è¨ˆ

##### ç”¨æˆ¶è¨Šæ¯ï¼ˆå·¦å´ï¼‰
- **èƒŒæ™¯è‰²**: ç™½è‰² (`bg-white`)
- **æ–‡å­—è‰²**: æ·±ç° (`text-gray-900`)
- **å°é½Š**: é å·¦
- **é ­åƒ**: é¡¯ç¤ºæ–¼å·¦å´

##### ç®¡ç†å“¡è¨Šæ¯ï¼ˆå³å´ï¼‰
- **èƒŒæ™¯è‰²**: ç´«è‰² (`bg-purple-600`)
- **æ–‡å­—è‰²**: ç™½è‰² (`text-white`)
- **å°é½Š**: é å³
- **é ­åƒ**: ä¸é¡¯ç¤º

##### ç³»çµ±è¨Šæ¯ï¼ˆä¸­é–“ï¼‰
- **èƒŒæ™¯è‰²**: é»ƒè‰² (`bg-yellow-100`)
- **æ–‡å­—è‰²**: æ·±ç° (`text-gray-800`)
- **å°é½Š**: ç½®ä¸­
- **ç”¨é€”**: è‡ªå‹•åŒ–è¨Šæ¯ã€ç‹€æ…‹æ›´æ–°

#### 4.8.4 è¨Šæ¯ç‹€æ…‹æŒ‡ç¤ºå™¨

##### å·²è®€ç‹€æ…‹ï¼ˆåƒ…ç®¡ç†å“¡è¨Šæ¯ï¼‰
```typescript
const messageStatus = {
  sending: <Clock className="w-3 h-3 text-gray-400" />,
  sent: <CheckCircle className="w-3 h-3 text-gray-400" />,
  delivered: (
    <>
      <CheckCircle className="w-3 h-3 text-gray-400" />
      <CheckCircle className="w-3 h-3 text-gray-400 -ml-1" />
    </>
  ),
  read: (
    <>
      <CheckCircle className="w-3 h-3 text-blue-500" />
      <CheckCircle className="w-3 h-3 text-blue-500 -ml-1" />
    </>
  )
}
```

#### 4.8.5 å³æ™‚æ›´æ–°æ©Ÿåˆ¶

##### è¼ªè©¢æ©Ÿåˆ¶
- **è¼ªè©¢é–“éš”**: 3 ç§’
- **API**: `GET /api/admin/chat/messages?userId=[userId]&lastMessageId=[lastMessageId]`
- **å¯¦ä½œ**: ä½¿ç”¨ `setInterval` å®šæœŸæŸ¥è©¢æ–°è¨Šæ¯
- **å„ªåŒ–**: åƒ…è¿”å› `lastMessageId` ä¹‹å¾Œçš„æ–°è¨Šæ¯

##### ç¨‹å¼ç¢¼å¯¦ä½œ
```typescript
const startMessagePolling = (userId: string) => {
  if (pollingInterval.current) {
    clearInterval(pollingInterval.current)
  }

  pollingInterval.current = setInterval(() => {
    fetchMessages(userId, true) // isPolling = true
  }, 3000)
}

// Cleanup on unmount or user switch
useEffect(() => {
  return () => {
    if (pollingInterval.current) {
      clearInterval(pollingInterval.current)
    }
  }
}, [selectedUser])
```

#### 4.8.6 å¿«é€Ÿå›è¦†åŠŸèƒ½

##### é è¨­å¿«é€Ÿå›è¦†
```typescript
const quickReplies = [
  'æ„Ÿè¬æ‚¨çš„è©¢å•ï¼',
  'èª²ç¨‹è³‡è¨Šè«‹è¼¸å…¥ã€Œå ±åã€',
  'æœ‰ä»€éº¼å¯ä»¥å¹«åŠ©æ‚¨çš„å—ï¼Ÿ',
  'ç¨å¾Œæœƒæœ‰å°ˆäººç‚ºæ‚¨æœå‹™',
  'è«‹æä¾›æ‚¨çš„è¯çµ¡æ–¹å¼'
]
```

##### ä½¿ç”¨æ–¹å¼
- é»æ“Šå¿«é€Ÿå›è¦†æŒ‰éˆ•
- è¨Šæ¯è‡ªå‹•å¡«å…¥è¼¸å…¥æ¡†
- å¯ç·¨è¼¯å¾Œå†ç™¼é€

#### 4.8.7 Typing Indicator

##### è§¸ç™¼æ¢ä»¶
- ç”¨æˆ¶å‚³é€æ–°è¨Šæ¯æ™‚
- é¡¯ç¤º 1 ç§’å¾Œæ¶ˆå¤±

##### UI è¨­è¨ˆ
```
[ç”¨æˆ¶é ­åƒ] [ä¸‰å€‹è·³å‹•çš„å°åœ“é»]
```

---

## 5. æ•¸æ“šæ¨¡å‹

### 5.1 Firestore Collections çµæ§‹

#### 5.1.1 `users` Collection

**Collection Path**: `/users/{userId}`

**æ¬„ä½å®šç¾©**:
```typescript
{
  userId: string                  // LINE User IDï¼ˆDocument IDï¼‰
  displayName: string             // ç”¨æˆ¶é¡¯ç¤ºåç¨±
  pictureUrl?: string             // ç”¨æˆ¶é ­åƒ URL
  statusMessage?: string          // LINE ç‹€æ…‹è¨Šæ¯
  followedAt: Timestamp           // è¿½è¹¤æ™‚é–“ï¼ˆåŠ å…¥ LINE Bot æ™‚é–“ï¼‰
  isFollowing: boolean            // æ˜¯å¦ä»åœ¨è¿½è¹¤ï¼ˆæœªå°é–ï¼‰
  lastActivity: Timestamp         // æœ€å¾Œæ´»å‹•æ™‚é–“
  registrationStatus?: string     // å ±åç‹€æ…‹: 'interested' | 'paid' | 'confirmed'
  paymentInfo?: {
    amount?: number               // ä»˜æ¬¾é‡‘é¡
    last5Digits?: string          // åŒ¯æ¬¾å¾Œäº”ç¢¼
    ticketType?: string           // ç¥¨ç¨®: 'regular' | 'invited' | 'complimentary'
    submittedAt?: Timestamp       // æäº¤åŒ¯æ¬¾è³‡è¨Šæ™‚é–“
    confirmedAt?: Timestamp       // ç¢ºèªæ”¶æ¬¾æ™‚é–“
  }
  tags?: string[]                 // ç”¨æˆ¶æ¨™ç±¤ï¼ˆç”¨æ–¼åˆ†é¡èˆ‡ç¯©é¸ï¼‰
  notes?: string                  // ç®¡ç†å“¡å‚™è¨»
  firstViewedRegistrationAt?: Timestamp  // ç¬¬ä¸€æ¬¡æŸ¥çœ‹å ±åè³‡è¨Šçš„æ™‚é–“
}
```

**ç´¢å¼•ï¼ˆIndexesï¼‰**:
```
- isFollowing (ASC)
- registrationStatus (ASC)
- followedAt (ASC/DESC)
- lastActivity (ASC/DESC)
- tags (ARRAY)
```

#### 5.1.2 `activities` Collection

**Collection Path**: `/activities/{activityId}`

**æ¬„ä½å®šç¾©**:
```typescript
{
  userId: string                  // ç”¨æˆ¶ IDï¼ˆé—œè¯åˆ° usersï¼‰
  displayName: string             // ç”¨æˆ¶åç¨±ï¼ˆå†—é¤˜ï¼Œä¾¿æ–¼æŸ¥è©¢ï¼‰
  pictureUrl?: string             // ç”¨æˆ¶é ­åƒ
  message: string                 // æ´»å‹•è¨Šæ¯å…§å®¹
  timestamp: Timestamp            // æ´»å‹•æ™‚é–“
  type: string                    // æ´»å‹•é¡å‹: 'message' | 'registration' | 'payment_confirm' | 'general_message'
}
```

**ç´¢å¼•ï¼ˆIndexesï¼‰**:
```
- userId (ASC) + timestamp (DESC)
```

**ç”¨é€”**:
- ç”¨æˆ¶æ´»å‹•æ­·å²è¨˜éŒ„
- ç”¨æ–¼ã€Œç”¨æˆ¶æ´»å‹•ã€é¢æ¿é¡¯ç¤º
- è¿½è¹¤ç”¨æˆ¶è¡Œç‚ºè»Œè·¡

#### 5.1.3 `remarketingRules` Collection

**Collection Path**: `/remarketingRules/{ruleId}`

**æ¬„ä½å®šç¾©**:
```typescript
{
  name: string                    // è¦å‰‡åç¨±
  description: string             // è¦å‰‡èªªæ˜
  triggerDays: number             // è§¸ç™¼å¤©æ•¸ï¼ˆåŠ å…¥å¾Œå¹¾å¤©ï¼‰
  targetConditions: {
    hasInteracted: boolean        // æ˜¯å¦éœ€è¦æœ‰äº’å‹•
    registrationStatus?: string[] // ç›®æ¨™è¨»å†Šç‹€æ…‹
    notInStatus?: string[]        // æ’é™¤çš„ç‹€æ…‹
  }
  messageTemplate: string         // è¨Šæ¯æ¨¡æ¿ ID
  customMessage?: string          // è‡ªè¨‚è¨Šæ¯ï¼ˆè‹¥ä¸ä½¿ç”¨æ¨¡æ¿ï¼‰
  isActive: boolean               // æ˜¯å¦å•Ÿç”¨
  createdAt: Timestamp            // å»ºç«‹æ™‚é–“
  lastExecuted?: Timestamp        // æœ€å¾ŒåŸ·è¡Œæ™‚é–“
}
```

#### 5.1.4 `remarketingLogs` Collection

**Collection Path**: `/remarketingLogs/{logId}`

**æ¬„ä½å®šç¾©**:
```typescript
{
  userId: string                  // ç”¨æˆ¶ ID
  ruleId: string                  // è¦å‰‡ ID
  ruleName: string                // è¦å‰‡åç¨±
  sentAt: Timestamp               // ç™¼é€æ™‚é–“
  status: string                  // ç™¼é€ç‹€æ…‹: 'success' | 'failed' | 'skipped'
  reason?: string                 // å¤±æ•—æˆ–è·³éçš„åŸå› 
}
```

**ç´¢å¼•ï¼ˆIndexesï¼‰**:
```
- userId (ASC) + sentAt (DESC)
- ruleId (ASC) + sentAt (DESC)
```

**ç”¨é€”**:
- é˜²æ­¢é‡è¤‡ç™¼é€åŒä¸€è¦å‰‡è¨Šæ¯
- è¿½è¹¤å†è¡ŒéŠ·æ•ˆæœ
- æä¾›å†è¡ŒéŠ·åˆ†æè³‡æ–™

#### 5.1.5 `messages` Collectionï¼ˆå¯é¸ï¼‰

**Collection Path**: `/messages/{messageId}`

**æ¬„ä½å®šç¾©**:
```typescript
{
  type: string                    // è¨Šæ¯é¡å‹: 'broadcast' | 'individual' | 'reply'
  recipientId?: string            // æ¥æ”¶è€… IDï¼ˆå€‹åˆ¥è¨Šæ¯ï¼‰
  recipientName?: string          // æ¥æ”¶è€…åç¨±
  content: string                 // è¨Šæ¯å…§å®¹
  sentAt: Timestamp               // ç™¼é€æ™‚é–“
  sentBy: string                  // ç™¼é€è€…ï¼ˆç®¡ç†å“¡ IDï¼‰
  status: string                  // ç™¼é€ç‹€æ…‹: 'sent' | 'failed' | 'pending'
  replyTo?: string                // å›è¦†çš„è¨Šæ¯ ID
}
```

**ç”¨é€”**:
- è¨Šæ¯ç™¼é€è¨˜éŒ„
- è¨Šæ¯ç®¡ç†ä¸­å¿ƒçš„ã€Œè¨Šæ¯ç´€éŒ„ã€åŠŸèƒ½

#### 5.1.6 `chatMessages` Collectionï¼ˆå¯é¸ï¼‰

**Collection Path**: `/chatMessages/{messageId}`

**æ¬„ä½å®šç¾©**:
```typescript
{
  userId: string                  // ç”¨æˆ¶ ID
  userName: string                // ç”¨æˆ¶åç¨±
  userPicture?: string            // ç”¨æˆ¶é ­åƒ
  content: string                 // è¨Šæ¯å…§å®¹
  timestamp: Timestamp            // ç™¼é€æ™‚é–“
  type: string                    // è¨Šæ¯é¡å‹: 'user' | 'admin' | 'system'
  status?: string                 // ç‹€æ…‹ï¼ˆåƒ…ç®¡ç†å“¡è¨Šæ¯ï¼‰: 'sending' | 'sent' | 'delivered' | 'read'
  attachments?: string[]          // é™„ä»¶ URLï¼ˆæœªä¾†åŠŸèƒ½ï¼‰
}
```

**ç´¢å¼•ï¼ˆIndexesï¼‰**:
```
- userId (ASC) + timestamp (ASC)
```

**ç”¨é€”**:
- èŠå¤©å®¤è¨Šæ¯è¨˜éŒ„
- æ”¯æ´è¨Šæ¯æ­·å²æŸ¥è©¢

---

### 5.2 æ•¸æ“šé—œè¯åœ–

```
users (1) â”€â”€< (N) activities
  â”‚
  â”œâ”€â”€< (N) remarketingLogs
  â”‚
  â”œâ”€â”€< (N) messages (recipientId)
  â”‚
  â””â”€â”€< (N) chatMessages

remarketingRules (1) â”€â”€< (N) remarketingLogs
```

---

## 6. API è¦æ ¼

### 6.1 èªè­‰ API

#### 6.1.1 ç™»å…¥
**Endpoint**: `POST /api/admin/auth/login`

**Request Body**:
```json
{
  "password": "vibe-admin-2024"
}
```

**Response (Success)**:
```json
{
  "success": true
}
```
- **Set-Cookie**: `admin-auth=[token]; Path=/; HttpOnly; SameSite=Lax`

**Response (Error)**:
```json
{
  "success": false,
  "error": "å¯†ç¢¼éŒ¯èª¤"
}
```

#### 6.1.2 ç™»å‡º
**Endpoint**: `POST /api/admin/auth/logout`

**Response**:
```json
{
  "success": true
}
```
- **Set-Cookie**: `admin-auth=; Max-Age=0`

---

### 6.2 ç”¨æˆ¶ç®¡ç† API

#### 6.2.1 å–å¾—ç”¨æˆ¶åˆ—è¡¨
**Endpoint**: `GET /api/admin/users`

**Query Parameters**:
| åƒæ•¸ | é¡å‹ | å¿…å¡« | èªªæ˜ |
|------|------|------|------|
| `isFollowing` | boolean | å¦ | ç¯©é¸è¿½è¹¤ç‹€æ…‹ |
| `registrationStatus` | string | å¦ | ç¯©é¸å ±åç‹€æ…‹ |
| `tag` | string | å¦ | ç¯©é¸åŒ…å«ç‰¹å®šæ¨™ç±¤çš„ç”¨æˆ¶ |

**Example Request**:
```
GET /api/admin/users?isFollowing=true&registrationStatus=confirmed
```

**Response**:
```json
{
  "users": [
    {
      "userId": "U1234567890abcdef",
      "displayName": "ç‹å°æ˜",
      "pictureUrl": "https://profile.line-scdn.net/...",
      "followedAt": "2024-09-15T08:30:00.000Z",
      "isFollowing": true,
      "lastActivity": "2024-09-20T14:22:00.000Z",
      "registrationStatus": "confirmed",
      "paymentInfo": {
        "amount": 3000,
        "last5Digits": "12345",
        "ticketType": "regular",
        "confirmedAt": "2024-09-20T10:00:00.000Z"
      },
      "tags": ["paid", "early_bird"]
    }
  ]
}
```

#### 6.2.2 å–å¾—ç”¨æˆ¶æ´»å‹•è¨˜éŒ„
**Endpoint**: `GET /api/admin/users/[userId]/activities`

**Response**:
```json
{
  "activities": [
    {
      "id": "act_001",
      "userId": "U1234567890abcdef",
      "displayName": "ç‹å°æ˜",
      "message": "æŸ¥è©¢å ±åè³‡è¨Š",
      "timestamp": "2024-09-15T09:00:00.000Z",
      "type": "registration"
    }
  ]
}
```

#### 6.2.3 ç¢ºèªä»˜æ¬¾
**Endpoint**: `POST /api/admin/users/[userId]/confirm-payment`

**Request Body**:
```json
{
  "status": "confirmed",
  "paymentInfo": {
    "amount": 3000,
    "last5Digits": "12345",
    "ticketType": "regular"
  }
}
```

**Response**:
```json
{
  "success": true
}
```

**Side Effects**:
- æ›´æ–°ç”¨æˆ¶ `registrationStatus` ç‚º `confirmed`
- æ›´æ–° `paymentInfo.confirmedAt`
- ç™¼é€ LINE ç¢ºèªè¨Šæ¯çµ¦ç”¨æˆ¶

#### 6.2.4 æ¸…é™¤ç”¨æˆ¶è³‡æ–™
**Endpoint**: `DELETE /api/admin/users/[userId]/clear`

**Response**:
```json
{
  "success": true
}
```

**åŠŸèƒ½**:
- é‡ç½®ç”¨æˆ¶çš„ `registrationStatus` èˆ‡ `paymentInfo`
- ä¿ç•™ç”¨æˆ¶åŸºæœ¬è³‡æ–™èˆ‡æ´»å‹•è¨˜éŒ„

#### 6.2.5 å–å¾—ç”¨æˆ¶å†è¡ŒéŠ·æ­·å²
**Endpoint**: `GET /api/admin/users/[userId]/remarketing-history`

**Response**:
```json
{
  "history": [
    {
      "id": "log_001",
      "userId": "U1234567890abcdef",
      "ruleId": "rule_001",
      "ruleName": "ç¬¬1å¤© - æ­¡è¿æé†’",
      "sentAt": "2024-09-16T09:00:00.000Z",
      "status": "success"
    }
  ]
}
```

---

### 6.3 è¨Šæ¯ç®¡ç† API

#### 6.3.1 å–å¾—è¨Šæ¯åˆ—è¡¨
**Endpoint**: `GET /api/admin/messages`

**Response**:
```json
{
  "messages": [
    {
      "id": "msg_001",
      "type": "individual",
      "recipientId": "U1234567890abcdef",
      "recipientName": "ç‹å°æ˜",
      "content": "æ„Ÿè¬æ‚¨çš„å ±åï¼",
      "sentAt": "2024-09-20T10:00:00.000Z",
      "sentBy": "admin",
      "status": "sent"
    }
  ]
}
```

#### 6.3.2 ç™¼é€è¨Šæ¯
**Endpoint**: `POST /api/admin/messages/send`

**Request Body**:
```json
{
  "type": "individual",
  "recipientId": "U1234567890abcdef",
  "content": "æ‚¨å¥½ï¼Œé€™æ˜¯æ¸¬è©¦è¨Šæ¯"
}
```

**Response**:
```json
{
  "success": true,
  "messageId": "msg_002"
}
```

**Side Effects**:
- é€é LINE Messaging API ç™¼é€è¨Šæ¯
- è¨˜éŒ„è‡³ `messages` collectionï¼ˆè‹¥æœ‰å¯¦ä½œï¼‰

---

### 6.4 èŠå¤©å®¤ API

#### 6.4.1 å–å¾—èŠå¤©è¨Šæ¯
**Endpoint**: `GET /api/admin/chat/messages`

**Query Parameters**:
| åƒæ•¸ | é¡å‹ | å¿…å¡« | èªªæ˜ |
|------|------|------|------|
| `userId` | string | æ˜¯ | ç”¨æˆ¶ ID |
| `lastMessageId` | string | å¦ | æœ€å¾Œå·²è®€è¨Šæ¯ IDï¼ˆç”¨æ–¼è¼ªè©¢ï¼‰ |

**Example Request**:
```
GET /api/admin/chat/messages?userId=U1234567890abcdef&lastMessageId=msg_100
```

**Response**:
```json
{
  "messages": [
    {
      "id": "msg_101",
      "userId": "U1234567890abcdef",
      "userName": "ç‹å°æ˜",
      "userPicture": "https://...",
      "content": "è«‹å•èª²ç¨‹ä½•æ™‚é–‹å§‹ï¼Ÿ",
      "timestamp": "2024-09-20T14:30:00.000Z",
      "type": "user"
    }
  ]
}
```

#### 6.4.2 ç™¼é€èŠå¤©è¨Šæ¯
**Endpoint**: `POST /api/admin/chat/messages`

**Request Body**:
```json
{
  "userId": "U1234567890abcdef",
  "content": "èª²ç¨‹å°‡æ–¼ 2025/10/12 é–‹å§‹",
  "userName": "ç‹å°æ˜",
  "userPicture": "https://..."
}
```

**Response**:
```json
{
  "success": true,
  "messageId": "msg_102"
}
```

**Side Effects**:
- ç™¼é€ LINE è¨Šæ¯
- å„²å­˜è‡³ `chatMessages` collection
- åŒæ™‚èª¿ç”¨ `/api/admin/messages/send` ç™¼é€ LINE è¨Šæ¯

---

### 6.5 å†è¡ŒéŠ· API

#### 6.5.1 å–å¾—å†è¡ŒéŠ·è¦å‰‡
**Endpoint**: `GET /api/remarketing/rules`

**Response**:
```json
{
  "rules": [
    {
      "id": "rule_001",
      "name": "ç¬¬1å¤© - æ­¡è¿æé†’",
      "description": "ç”¨æˆ¶åŠ å…¥å¾Œç¬¬1å¤©ï¼Œè‹¥æœªæŸ¥è©¢å ±åè³‡è¨Šï¼Œç™¼é€æ­¡è¿ä¸¦ä»‹ç´¹èª²ç¨‹",
      "triggerDays": 1,
      "targetConditions": {
        "hasInteracted": false,
        "notInStatus": ["paid", "confirmed"]
      },
      "messageTemplate": "welcome_day1",
      "isActive": true,
      "createdAt": "2024-09-01T00:00:00.000Z",
      "lastExecuted": "2024-09-20T09:00:00.000Z"
    }
  ]
}
```

#### 6.5.2 æ–°å¢å†è¡ŒéŠ·è¦å‰‡
**Endpoint**: `POST /api/remarketing/rules`

**Request Body**:
```json
{
  "name": "ç¬¬10å¤© - æœ€çµ‚å„ªæƒ ",
  "description": "æœ€å¾Œå„ªæƒ æé†’",
  "triggerDays": 10,
  "targetConditions": {
    "hasInteracted": true,
    "notInStatus": ["paid", "confirmed"]
  },
  "messageTemplate": "final_offer",
  "isActive": true
}
```

**Response**:
```json
{
  "success": true,
  "ruleId": "rule_005"
}
```

#### 6.5.3 æ›´æ–°å†è¡ŒéŠ·è¦å‰‡
**Endpoint**: `PUT /api/remarketing/rules`

**Request Body**:
```json
{
  "id": "rule_001",
  "isActive": false
}
```

**Response**:
```json
{
  "success": true
}
```

#### 6.5.4 åˆªé™¤å†è¡ŒéŠ·è¦å‰‡
**Endpoint**: `DELETE /api/remarketing/rules?id=[ruleId]`

**Response**:
```json
{
  "success": true
}
```

#### 6.5.5 åŸ·è¡Œå†è¡ŒéŠ·
**Endpoint**: `POST /api/remarketing/execute`

**Request Headers**:
```
Authorization: Bearer vibe-admin-2024
```

**Response**:
```json
{
  "success": true,
  "executedAt": "2024-09-20T09:00:00.000Z",
  "summary": {
    "totalProcessed": 50,
    "successful": 48,
    "failed": 2
  },
  "logs": [
    {
      "userId": "U1234567890abcdef",
      "ruleId": "rule_001",
      "ruleName": "ç¬¬1å¤© - æ­¡è¿æé†’",
      "sentAt": "2024-09-20T09:00:05.000Z",
      "status": "success"
    }
  ]
}
```

---

### 6.6 åˆ†æ API

#### 6.6.1 æ¯æ—¥ç”¨æˆ¶çµ±è¨ˆ
**Endpoint**: `GET /api/admin/analytics/daily-users`

**Query Parameters**:
| åƒæ•¸ | é¡å‹ | å¿…å¡« | èªªæ˜ |
|------|------|------|------|
| `days` | number | å¦ | æŸ¥è©¢å¤©æ•¸ï¼ˆé è¨­ 30ï¼‰ |

**Response**:
```json
{
  "stats": [
    {
      "date": "2024-09-01",
      "newUsers": 5,
      "totalUsers": 100
    },
    {
      "date": "2024-09-02",
      "newUsers": 8,
      "totalUsers": 108
    }
  ]
}
```

#### 6.6.2 å†è¡ŒéŠ·åˆ†æ
**Endpoint**: `GET /api/admin/remarketing/analytics`

**Response**:
```json
{
  "analytics": {
    "totalSent": 500,
    "successRate": 96.5,
    "byRule": [
      {
        "ruleId": "rule_001",
        "ruleName": "ç¬¬1å¤© - æ­¡è¿æé†’",
        "sent": 150,
        "successful": 148,
        "failed": 2
      }
    ],
    "conversionRate": {
      "totalTargeted": 500,
      "converted": 45,
      "rate": 9.0
    }
  }
}
```

---

### 6.7 LINE Bot Webhook API

#### 6.7.1 Webhook æ¥æ”¶
**Endpoint**: `POST /api/linebot/webhook`

**Request Headers**:
```
X-Line-Signature: [LINE ç°½ç« ]
Content-Type: application/json
```

**Request Body**:
```json
{
  "events": [
    {
      "type": "message",
      "replyToken": "abc123...",
      "source": {
        "userId": "U1234567890abcdef",
        "type": "user"
      },
      "message": {
        "type": "text",
        "id": "msg_001",
        "text": "å ±å"
      },
      "timestamp": 1695201600000
    }
  ]
}
```

**Response**:
```json
{
  "success": true
}
```

**è™•ç†é‚è¼¯**:
1. é©—è­‰ LINE ç°½ç« 
2. è§£æäº‹ä»¶é¡å‹ï¼ˆmessage / follow / unfollowï¼‰
3. æ ¹æ“šè¨Šæ¯å…§å®¹è·¯ç”±åˆ°å°æ‡‰ handler
4. å›è¦†ç”¨æˆ¶æˆ–è¨˜éŒ„æ´»å‹•

**Handler è·¯ç”±**:
```typescript
const handlers = {
  'å ±å': registrationHandler,
  'ä»˜æ¬¾': paymentHandler,
  'å·²å®ŒæˆåŒ¯æ¬¾': paymentHandler,
  'å–æ¶ˆ': cancelHandler,
  // ... å…¶ä»–é—œéµå­—
}
```

---

## 7. UI/UX è¨­è¨ˆè¦ç¯„

### 7.1 è¨­è¨ˆç³»çµ±

#### 7.1.1 è‰²å½©è¦ç¯„

##### ä¸»è‰²èª¿
```css
/* ç´«è‰²ï¼ˆä¸»è¦å“ç‰Œè‰²ï¼‰ */
--purple-50: #FAF5FF;
--purple-100: #F3E8FF;
--purple-600: #9333EA;  /* ä¸»æŒ‰éˆ•ã€é€£çµ */
--purple-700: #7E22CE;  /* Hover ç‹€æ…‹ */

/* ç°è‰²ï¼ˆèƒŒæ™¯èˆ‡æ–‡å­—ï¼‰ */
--gray-50: #F9FAFB;     /* æ·ºèƒŒæ™¯ */
--gray-100: #F3F4F6;    /* å¡ç‰‡èƒŒæ™¯ */
--gray-500: #6B7280;    /* æ¬¡è¦æ–‡å­— */
--gray-900: #111827;    /* ä¸»è¦æ–‡å­— */
```

##### ç‹€æ…‹è‰²
```css
/* æˆåŠŸ */
--green-100: #D1FAE5;
--green-600: #10B981;
--green-800: #065F46;

/* è­¦å‘Š */
--yellow-100: #FEF3C7;
--yellow-600: #F59E0B;
--yellow-800: #92400E;

/* éŒ¯èª¤ */
--red-100: #FEE2E2;
--red-600: #EF4444;
--red-800: #991B1B;

/* è³‡è¨Š */
--blue-100: #DBEAFE;
--blue-600: #3B82F6;
--blue-800: #1E40AF;
```

#### 7.1.2 å­—é«”è¦ç¯„

##### å­—å‹
```css
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
  'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
  sans-serif;
```

##### å­—ç´š
```css
/* æ¨™é¡Œ */
.text-3xl { font-size: 1.875rem; }  /* 30px - é é¢æ¨™é¡Œ */
.text-2xl { font-size: 1.5rem; }    /* 24px - å€å¡Šæ¨™é¡Œ */
.text-xl { font-size: 1.25rem; }    /* 20px - å¡ç‰‡æ¨™é¡Œ */
.text-lg { font-size: 1.125rem; }   /* 18px - æ¬¡æ¨™é¡Œ */

/* å…§æ–‡ */
.text-base { font-size: 1rem; }     /* 16px - é è¨­å…§æ–‡ */
.text-sm { font-size: 0.875rem; }   /* 14px - å°å­— */
.text-xs { font-size: 0.75rem; }    /* 12px - è¼”åŠ©æ–‡å­— */
```

#### 7.1.3 é–“è·è¦ç¯„

```css
/* Spacing Scale (Tailwind) */
.p-2  { padding: 0.5rem; }   /* 8px */
.p-4  { padding: 1rem; }     /* 16px */
.p-6  { padding: 1.5rem; }   /* 24px */
.p-8  { padding: 2rem; }     /* 32px */

.gap-2 { gap: 0.5rem; }      /* 8px */
.gap-4 { gap: 1rem; }        /* 16px */
.gap-6 { gap: 1.5rem; }      /* 24px */
```

#### 7.1.4 åœ“è§’è¦ç¯„

```css
.rounded-lg { border-radius: 0.5rem; }   /* 8px - å¡ç‰‡ã€æŒ‰éˆ• */
.rounded-xl { border-radius: 0.75rem; }  /* 12px - å¤§å¡ç‰‡ */
.rounded-2xl { border-radius: 1rem; }    /* 16px - Modal */
.rounded-full { border-radius: 9999px; } /* åœ“å½¢ - é ­åƒã€Badge */
```

#### 7.1.5 é™°å½±è¦ç¯„

```css
.shadow-sm {
  box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
}

.shadow {
  box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
}

.shadow-lg {
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
}

.shadow-2xl {
  box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
}
```

---

### 7.2 çµ„ä»¶è¨­è¨ˆè¦ç¯„

#### 7.2.1 æŒ‰éˆ• (Button)

##### ä¸»è¦æŒ‰éˆ•ï¼ˆPrimaryï¼‰
```tsx
<button className="px-6 py-2 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-all">
  ç¢ºèª
</button>
```

##### æ¬¡è¦æŒ‰éˆ•ï¼ˆSecondaryï¼‰
```tsx
<button className="px-6 py-2 bg-gray-200 text-gray-700 font-medium rounded-lg hover:bg-gray-300 transition-all">
  å–æ¶ˆ
</button>
```

##### å±éšªæŒ‰éˆ•ï¼ˆDangerï¼‰
```tsx
<button className="px-6 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-all">
  åˆªé™¤
</button>
```

##### åœç”¨ç‹€æ…‹
```tsx
<button className="px-6 py-2 bg-gray-300 text-gray-500 font-medium rounded-lg cursor-not-allowed" disabled>
  è™•ç†ä¸­...
</button>
```

#### 7.2.2 è¼¸å…¥æ¡† (Input)

##### æ–‡å­—è¼¸å…¥
```tsx
<input
  type="text"
  placeholder="è«‹è¼¸å…¥..."
  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
/>
```

##### æœå°‹æ¡†ï¼ˆå« Iconï¼‰
```tsx
<div className="relative">
  <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5" />
  <input
    type="text"
    placeholder="æœå°‹..."
    className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
  />
</div>
```

##### Textarea
```tsx
<textarea
  placeholder="è«‹è¼¸å…¥è¨Šæ¯..."
  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 resize-none"
  rows={4}
/>
```

#### 7.2.3 å¡ç‰‡ (Card)

##### åŸºæœ¬å¡ç‰‡
```tsx
<div className="bg-white rounded-lg shadow p-6">
  <h3 className="text-lg font-medium text-gray-900 mb-4">å¡ç‰‡æ¨™é¡Œ</h3>
  <p className="text-gray-600">å¡ç‰‡å…§å®¹...</p>
</div>
```

##### çµ±è¨ˆå¡ç‰‡
```tsx
<div className="bg-white rounded-lg shadow p-6">
  <div className="flex items-center justify-between mb-2">
    <span className="text-sm text-gray-500">ç¸½ç”¨æˆ¶æ•¸</span>
    <Users className="w-5 h-5 text-purple-600" />
  </div>
  <p className="text-2xl font-bold text-gray-900">150</p>
  <p className="text-sm text-green-600 mt-2">â†‘ 12% vs ä¸Šé€±</p>
</div>
```

#### 7.2.4 Badge

##### ç‹€æ…‹ Badge
```tsx
<span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
  å·²ç¢ºèª
</span>
```

##### è¨ˆæ•¸ Badge
```tsx
<span className="bg-red-500 text-white text-xs rounded-full px-2 py-0.5">
  5
</span>
```

#### 7.2.5 è¡¨æ ¼ (Table)

```tsx
<div className="overflow-x-auto">
  <table className="w-full">
    <thead className="bg-gray-50">
      <tr>
        <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
          ç”¨æˆ¶åç¨±
        </th>
      </tr>
    </thead>
    <tbody className="bg-white divide-y divide-gray-200">
      <tr>
        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
          ç‹å°æ˜
        </td>
      </tr>
    </tbody>
  </table>
</div>
```

#### 7.2.6 Modal / Dialog

```tsx
<div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div className="bg-white rounded-2xl shadow-2xl p-6 max-w-md w-full">
    <h3 className="text-xl font-bold text-gray-900 mb-4">å°è©±æ¡†æ¨™é¡Œ</h3>
    <p className="text-gray-600 mb-6">å°è©±æ¡†å…§å®¹...</p>
    <div className="flex justify-end gap-3">
      <button className="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg">
        å–æ¶ˆ
      </button>
      <button className="px-4 py-2 bg-purple-600 text-white rounded-lg">
        ç¢ºèª
      </button>
    </div>
  </div>
</div>
```

#### 7.2.7 Tooltip

**çµ„ä»¶è·¯å¾‘**: `components/ui/tooltip.tsx`

**ä½¿ç”¨æ–¹å¼**:
```tsx
<TooltipProvider>
  <Tooltip>
    <TooltipTrigger>
      <button>Hover me</button>
    </TooltipTrigger>
    <TooltipContent>
      <p>æç¤ºå…§å®¹</p>
    </TooltipContent>
  </Tooltip>
</TooltipProvider>
```

---

### 7.3 éŸ¿æ‡‰å¼è¨­è¨ˆ

#### 7.3.1 æ–·é»è¦ç¯„

```css
/* Tailwind Breakpoints */
sm: 640px   /* å¹³æ¿ç›´å‘ */
md: 768px   /* å¹³æ¿æ©«å‘ */
lg: 1024px  /* ç­†é›» */
xl: 1280px  /* æ¡Œæ©Ÿ */
2xl: 1536px /* å¤§è¢å¹• */
```

#### 7.3.2 éŸ¿æ‡‰å¼ Grid

```tsx
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  {/* æ‰‹æ©Ÿ 1 æ¬„ / å¹³æ¿ 2 æ¬„ / æ¡Œæ©Ÿ 3 æ¬„ */}
</div>
```

---

### 7.4 ç„¡éšœç¤™è¨­è¨ˆ

#### 7.4.1 èªæ„åŒ– HTML
- ä½¿ç”¨æ­£ç¢ºçš„ HTML æ¨™ç±¤ (`<button>`, `<nav>`, `<main>`)
- ç‚ºäº’å‹•å…ƒç´ æä¾› `aria-label`

#### 7.4.2 éµç›¤å°èˆª
- æ‰€æœ‰äº’å‹•å…ƒç´ å¯é€é Tab éµå°èˆª
- æä¾›æ˜é¡¯çš„ focus æ¨£å¼

#### 7.4.3 é¡è‰²å°æ¯”
- æ–‡å­—èˆ‡èƒŒæ™¯å°æ¯”åº¦è‡³å°‘ 4.5:1
- é‡è¦è³‡è¨Šä¸åƒ…ä¾è³´é¡è‰²å‚³é”

---

## 8. ç¬¬ä¸‰æ–¹é›†æˆ

### 8.1 LINE Messaging API

#### 8.1.1 åŸºæœ¬è³‡è¨Š
- **å®˜æ–¹æ–‡æª”**: https://developers.line.biz/en/docs/messaging-api/
- **SDK**: `@line/bot-sdk`

#### 8.1.2 ç’°å¢ƒè®Šæ•¸é…ç½®

```env
LINE_CHANNEL_ACCESS_TOKEN=your_channel_access_token
LINE_CHANNEL_SECRET=your_channel_secret
```

#### 8.1.3 Client åˆå§‹åŒ–

**æª”æ¡ˆ**: `lib/line/client.ts`

```typescript
import { Client } from '@line/bot-sdk';

const config = {
  channelAccessToken: process.env.LINE_CHANNEL_ACCESS_TOKEN || '',
  channelSecret: process.env.LINE_CHANNEL_SECRET || ''
};

export const getLineClient = () => new Client(config);
```

#### 8.1.4 å¸¸ç”¨åŠŸèƒ½

##### ç™¼é€æ–‡å­—è¨Šæ¯
```typescript
import { getLineClient } from '@/lib/line/client';

const client = getLineClient();

await client.pushMessage(userId, {
  type: 'text',
  text: 'æ‚¨å¥½ï¼Œé€™æ˜¯ä¸€å‰‡æ¸¬è©¦è¨Šæ¯'
});
```

##### ç™¼é€ Flex Message
```typescript
await client.pushMessage(userId, {
  type: 'flex',
  altText: 'èª²ç¨‹å ±åè³‡è¨Š',
  contents: {
    type: 'bubble',
    // ... Flex Message JSON
  }
});
```

##### å›è¦†è¨Šæ¯
```typescript
await client.replyMessage(replyToken, {
  type: 'text',
  text: 'æ”¶åˆ°æ‚¨çš„è¨Šæ¯äº†ï¼'
});
```

##### å–å¾—ç”¨æˆ¶è³‡è¨Š
```typescript
const profile = await client.getProfile(userId);
console.log(profile.displayName);
console.log(profile.pictureUrl);
```

#### 8.1.5 Webhook ç°½ç« é©—è­‰

```typescript
import { validateSignature } from '@line/bot-sdk';

const signature = req.headers['x-line-signature'];
const body = await req.text();

if (!validateSignature(body, channelSecret, signature)) {
  return NextResponse.json({ error: 'Invalid signature' }, { status: 401 });
}
```

---

### 8.2 Firebase

#### 8.2.1 åŸºæœ¬è³‡è¨Š
- **æœå‹™**: Firestore (Database)
- **SDK**: `firebase-admin`

#### 8.2.2 ç’°å¢ƒè®Šæ•¸é…ç½®

```env
FIREBASE_PROJECT_ID=your_project_id
FIREBASE_PRIVATE_KEY_ID=your_private_key_id
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=your_client_email
FIREBASE_CLIENT_ID=your_client_id
FIREBASE_AUTH_URI=https://accounts.google.com/o/oauth2/auth
FIREBASE_TOKEN_URI=https://oauth2.googleapis.com/token
FIREBASE_AUTH_PROVIDER_CERT_URL=https://www.googleapis.com/oauth2/v1/certs
FIREBASE_CLIENT_CERT_URL=your_client_cert_url
FIREBASE_STORAGE_BUCKET=your_project_id.appspot.com
NEXT_PUBLIC_FIREBASE_DATABASE_URL=https://your_project_id-default-rtdb.firebaseio.com
```

#### 8.2.3 Admin SDK åˆå§‹åŒ–

**æª”æ¡ˆ**: `lib/firebase/admin.ts`

```typescript
import * as admin from 'firebase-admin';

let firebaseApp: admin.app.App;

export const initFirebase = () => {
  if (!firebaseApp) {
    const serviceAccount = {
      type: 'service_account',
      project_id: process.env.FIREBASE_PROJECT_ID,
      private_key: process.env.FIREBASE_PRIVATE_KEY?.replace(/\\n/g, '\n'),
      client_email: process.env.FIREBASE_CLIENT_EMAIL,
      // ...å…¶ä»–æ¬„ä½
    };

    firebaseApp = admin.initializeApp({
      credential: admin.credential.cert(serviceAccount as any),
      databaseURL: process.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL,
      storageBucket: process.env.FIREBASE_STORAGE_BUCKET
    });
  }
  return firebaseApp;
};

export const getFirestore = () => {
  initFirebase();
  return admin.firestore();
};
```

#### 8.2.4 Firestore æ“ä½œç¯„ä¾‹

##### æ–°å¢æ–‡æª”
```typescript
const db = getFirestore();
await db.collection('users').doc(userId).set({
  displayName: 'John Doe',
  email: 'john@example.com'
});
```

##### æŸ¥è©¢æ–‡æª”
```typescript
const snapshot = await db.collection('users')
  .where('isFollowing', '==', true)
  .get();

const users = snapshot.docs.map(doc => ({
  id: doc.id,
  ...doc.data()
}));
```

##### æ›´æ–°æ–‡æª”
```typescript
await db.collection('users').doc(userId).update({
  lastActivity: admin.firestore.Timestamp.now()
});
```

##### åˆªé™¤æ–‡æª”
```typescript
await db.collection('users').doc(userId).delete();
```

---

### 8.3 Vercel Cron Jobs

#### 8.3.1 é…ç½®æª”æ¡ˆ

**æª”æ¡ˆ**: `vercel.json`

```json
{
  "crons": [
    {
      "path": "/api/marketing/cron",
      "schedule": "0 9 * * *"
    }
  ]
}
```

**èªªæ˜**:
- **path**: Cron Job èª¿ç”¨çš„ API è·¯å¾‘
- **schedule**: Cron è¡¨é”å¼ï¼ˆ`0 9 * * *` = æ¯å¤© 09:00ï¼‰

#### 8.3.2 Cron API å¯¦ä½œ

**æª”æ¡ˆ**: `app/api/marketing/cron/route.ts`

```typescript
import { executeRemarketingRules } from '@/lib/line/remarketingService';

export async function GET(req: Request) {
  // é©—è­‰ Cron Job è«‹æ±‚ï¼ˆå¯é¸ï¼‰
  const authHeader = req.headers.get('authorization');
  if (authHeader !== `Bearer ${process.env.CRON_SECRET}`) {
    return Response.json({ error: 'Unauthorized' }, { status: 401 });
  }

  // åŸ·è¡Œå†è¡ŒéŠ·
  const result = await executeRemarketingRules();

  return Response.json(result);
}
```

#### 8.3.3 Cron è¡¨é”å¼åƒè€ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åˆ†é˜ (0 - 59)
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å°æ™‚ (0 - 23)
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€ æ—¥æœŸ (1 - 31)
â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€ æœˆä»½ (1 - 12)
â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€ æ˜ŸæœŸ (0 - 7ï¼Œ0 å’Œ 7 éƒ½æ˜¯æ˜ŸæœŸæ—¥)
â”‚ â”‚ â”‚ â”‚ â”‚
* * * * *
```

**å¸¸ç”¨ç¯„ä¾‹**:
- `0 9 * * *` - æ¯å¤© 09:00
- `0 */6 * * *` - æ¯ 6 å°æ™‚
- `0 9 * * 1` - æ¯é€±ä¸€ 09:00
- `0 0 1 * *` - æ¯æœˆ 1 è™Ÿ 00:00

---

## 9. ç’°å¢ƒé…ç½®

### 9.1 ç’°å¢ƒè®Šæ•¸æ¸…å–®

å»ºç«‹ `.env.local` æª”æ¡ˆæ–¼å°ˆæ¡ˆæ ¹ç›®éŒ„ï¼š

```env
# Admin å¯†ç¢¼
ADMIN_PASSWORD=vibe-admin-2024

# LINE Messaging API
LINE_CHANNEL_ACCESS_TOKEN=your_line_channel_access_token
LINE_CHANNEL_SECRET=your_line_channel_secret

# Firebase Admin SDK
FIREBASE_PROJECT_ID=your_firebase_project_id
FIREBASE_PRIVATE_KEY_ID=your_firebase_private_key_id
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYour Private Key Here\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=your_firebase_client_email
FIREBASE_CLIENT_ID=your_firebase_client_id
FIREBASE_AUTH_URI=https://accounts.google.com/o/oauth2/auth
FIREBASE_TOKEN_URI=https://oauth2.googleapis.com/token
FIREBASE_AUTH_PROVIDER_CERT_URL=https://www.googleapis.com/oauth2/v1/certs
FIREBASE_CLIENT_CERT_URL=your_firebase_client_cert_url
FIREBASE_STORAGE_BUCKET=your_project_id.appspot.com
NEXT_PUBLIC_FIREBASE_DATABASE_URL=https://your_project_id-default-rtdb.firebaseio.com

# å†è¡ŒéŠ·è¨­å®š
ENABLE_AUTO_REMARKETING=true

# Cron Job Secretï¼ˆå¯é¸ï¼‰
CRON_SECRET=your_cron_secret_key
```

### 9.2 å–å¾—ç’°å¢ƒè®Šæ•¸æ•™å­¸

#### 9.2.1 LINE Messaging API

1. å‰å¾€ [LINE Developers Console](https://developers.line.biz/)
2. å»ºç«‹ Provider èˆ‡ Messaging API Channel
3. åœ¨ Channel è¨­å®šé å–å¾—ï¼š
   - `Channel Secret`
   - `Channel Access Token`ï¼ˆéœ€æ‰‹å‹•ç™¼è¡Œï¼‰
4. è¨­å®š Webhook URL: `https://your-domain.com/api/linebot/webhook`

#### 9.2.2 Firebase

1. å‰å¾€ [Firebase Console](https://console.firebase.google.com/)
2. å»ºç«‹å°ˆæ¡ˆ
3. å•Ÿç”¨ Firestore Database
4. å‰å¾€ã€Œå°ˆæ¡ˆè¨­å®šã€â†’ã€Œæœå‹™å¸³æˆ¶ã€
5. é»æ“Šã€Œç”¢ç”Ÿæ–°çš„ç§å¯†é‡‘é‘°ã€
6. ä¸‹è¼‰ JSON æª”æ¡ˆï¼Œå…§å«æ‰€æœ‰éœ€è¦çš„ç’°å¢ƒè®Šæ•¸

---

### 9.3 æœ¬åœ°é–‹ç™¼è¨­å®š

#### 9.3.1 å®‰è£ä¾è³´

```bash
npm install
```

#### 9.3.2 å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨

```bash
npm run dev
```

ä¼ºæœå™¨å°‡é‹è¡Œæ–¼ `http://localhost:3000`

#### 9.3.3 æ¸¬è©¦ LINE Webhookï¼ˆæœ¬åœ°ï¼‰

ä½¿ç”¨ [ngrok](https://ngrok.com/) å»ºç«‹å…¬é–‹ URL:

```bash
ngrok http 3000
```

å°‡ ngrok æä¾›çš„ HTTPS URL è¨­å®šç‚º LINE Webhook URL:
```
https://abc123.ngrok.io/api/linebot/webhook
```

---

## 10. éƒ¨ç½²æŒ‡å—

### 10.1 Vercel éƒ¨ç½²

#### 10.1.1 æº–å‚™å·¥ä½œ
1. å°‡å°ˆæ¡ˆæ¨é€è‡³ GitHub
2. è¨»å†Š [Vercel](https://vercel.com/) å¸³è™Ÿ
3. é€£çµ GitHub å¸³è™Ÿ

#### 10.1.2 éƒ¨ç½²æ­¥é©Ÿ

1. **åŒ¯å…¥å°ˆæ¡ˆ**
   - åœ¨ Vercel Dashboard é»æ“Šã€ŒAdd New Projectã€
   - é¸æ“‡ GitHub Repository
   - é»æ“Šã€ŒImportã€

2. **è¨­å®šç’°å¢ƒè®Šæ•¸**
   - åœ¨ã€ŒEnvironment Variablesã€å€å¡Š
   - é€ä¸€æ–°å¢æ‰€æœ‰ `.env.local` ä¸­çš„è®Šæ•¸
   - é¸æ“‡é©ç”¨ç’°å¢ƒï¼ˆProduction / Preview / Developmentï¼‰

3. **éƒ¨ç½²è¨­å®š**
   - Framework Preset: Next.js
   - Root Directory: `./`
   - Build Command: `npm run build`
   - Output Directory: `.next`

4. **éƒ¨ç½²**
   - é»æ“Šã€ŒDeployã€
   - ç­‰å¾…å»ºç½®å®Œæˆ

#### 10.1.3 è¨­å®š Cron Jobs

1. ç¢ºèª `vercel.json` å·²æ­£ç¢ºè¨­å®š
2. Vercel æœƒè‡ªå‹•åµæ¸¬ä¸¦å•Ÿç”¨ Cron Jobs
3. åœ¨ Vercel Dashboard çš„ã€ŒDeploymentsã€â†’ã€ŒCron Jobsã€æŸ¥çœ‹åŸ·è¡Œç‹€æ…‹

#### 10.1.4 è¨­å®šè‡ªè¨‚ç¶²åŸŸï¼ˆå¯é¸ï¼‰

1. å‰å¾€ Vercel å°ˆæ¡ˆè¨­å®š
2. é»æ“Šã€ŒDomainsã€
3. æ–°å¢è‡ªè¨‚ç¶²åŸŸ
4. ä¾ç…§æŒ‡ç¤ºè¨­å®š DNS

---

### 10.2 LINE Webhook è¨­å®š

éƒ¨ç½²å®Œæˆå¾Œï¼Œæ›´æ–° LINE Webhook URL:

```
https://your-domain.vercel.app/api/linebot/webhook
```

**æ¸¬è©¦ Webhook**:
```bash
curl -X POST https://your-domain.vercel.app/api/linebot/test
```

---

### 10.3 é˜²ç«ç‰†èˆ‡å®‰å…¨è¨­å®š

#### 10.3.1 ç’°å¢ƒè®Šæ•¸åŠ å¯†
- æ‰€æœ‰æ•æ„Ÿè³‡è¨Šå„²å­˜æ–¼ Vercel ç’°å¢ƒè®Šæ•¸ï¼ˆåŠ å¯†ï¼‰
- ä¸è¦å°‡ `.env.local` æäº¤è‡³ Git

#### 10.3.2 API è·¯ç”±ä¿è­·
- Admin API é€é Middleware é©—è­‰
- Webhook é€é LINE Signature é©—è­‰
- Cron API å¯é¸ç”¨ Bearer Token é©—è­‰

#### 10.3.3 CORS è¨­å®šï¼ˆå¦‚éœ€ï¼‰
```typescript
// app/api/*/route.ts
export async function GET(req: Request) {
  const response = NextResponse.json(data);
  response.headers.set('Access-Control-Allow-Origin', '*');
  return response;
}
```

---

## 11. ç³»çµ±ç¶­è­·èˆ‡ç›£æ§

### 11.1 æ—¥èªŒç®¡ç†

#### 11.1.1 Vercel Logs
- å‰å¾€ Vercel Dashboard â†’ å°ˆæ¡ˆ â†’ Deployments
- é»æ“Šç‰¹å®šéƒ¨ç½²æŸ¥çœ‹å³æ™‚ Logs
- æ”¯æ´ç¯©é¸èˆ‡æœå°‹

#### 11.1.2 æ‡‰ç”¨å±¤æ—¥èªŒ
æ‰€æœ‰é‡è¦æ“ä½œéƒ½æœ‰ `console.log` / `console.error`ï¼š
- ç”¨æˆ¶æ´»å‹•è¨˜éŒ„
- API éŒ¯èª¤
- å†è¡ŒéŠ·åŸ·è¡Œçµæœ
- LINE Webhook äº‹ä»¶

**å»ºè­°**: æ•´åˆç¬¬ä¸‰æ–¹æ—¥èªŒæœå‹™ï¼ˆå¦‚ Sentry, LogRocketï¼‰

---

### 11.2 éŒ¯èª¤è™•ç†

#### 11.2.1 å…¨åŸŸéŒ¯èª¤é‚Šç•Œ
```tsx
// app/error.tsx
'use client';

export default function Error({
  error,
  reset,
}: {
  error: Error;
  reset: () => void;
}) {
  return (
    <div className="min-h-screen flex items-center justify-center">
      <div className="text-center">
        <h2 className="text-2xl font-bold text-red-600 mb-4">ç™¼ç”ŸéŒ¯èª¤</h2>
        <p className="text-gray-600 mb-4">{error.message}</p>
        <button onClick={reset} className="px-4 py-2 bg-purple-600 text-white rounded-lg">
          é‡è©¦
        </button>
      </div>
    </div>
  );
}
```

#### 11.2.2 API éŒ¯èª¤è™•ç†
```typescript
export async function POST(req: Request) {
  try {
    // ... è™•ç†é‚è¼¯
  } catch (error) {
    console.error('API Error:', error);
    return NextResponse.json(
      { error: 'Internal Server Error', details: (error as Error).message },
      { status: 500 }
    );
  }
}
```

---

### 11.3 æ•ˆèƒ½ç›£æ§

#### 11.3.1 Vercel Analytics
- è‡ªå‹•æ•´åˆ
- è¿½è¹¤ Page Views, Unique Visitors
- Core Web Vitals æŒ‡æ¨™

#### 11.3.2 å»ºè­°æ•´åˆå·¥å…·
- **Google Analytics**: ç”¨æˆ¶è¡Œç‚ºåˆ†æ
- **Sentry**: éŒ¯èª¤è¿½è¹¤
- **Hotjar**: ä½¿ç”¨è€…é«”é©—åˆ†æ

---

## 12. å¸¸è¦‹å•é¡Œèˆ‡æ•…éšœæ’é™¤

### 12.1 ç™»å…¥å•é¡Œ

**å•é¡Œ**: ç„¡æ³•ç™»å…¥ç®¡ç†å¾Œå°

**æª¢æŸ¥é …ç›®**:
1. ç¢ºèªç’°å¢ƒè®Šæ•¸ `ADMIN_PASSWORD` å·²è¨­å®š
2. æ¸…é™¤ç€è¦½å™¨ Cookie
3. æª¢æŸ¥ Middleware æ˜¯å¦æ­£å¸¸é‹ä½œ

---

### 12.2 LINE Bot ç„¡å›æ‡‰

**å•é¡Œ**: ç”¨æˆ¶å‚³é€è¨Šæ¯å¾Œç„¡å›æ‡‰

**æª¢æŸ¥é …ç›®**:
1. ç¢ºèª LINE Webhook URL å·²æ­£ç¢ºè¨­å®š
2. æª¢æŸ¥ Webhook ç°½ç« é©—è­‰æ˜¯å¦é€šé
3. æŸ¥çœ‹ Vercel Logs æ˜¯å¦æœ‰éŒ¯èª¤è¨Šæ¯
4. ç¢ºèª `LINE_CHANNEL_ACCESS_TOKEN` æ­£ç¢º

**æ¸¬è©¦æŒ‡ä»¤**:
```bash
curl -X POST https://your-domain.com/api/linebot/test
```

---

### 12.3 å†è¡ŒéŠ·æœªåŸ·è¡Œ

**å•é¡Œ**: Cron Job æœªè‡ªå‹•ç™¼é€å†è¡ŒéŠ·è¨Šæ¯

**æª¢æŸ¥é …ç›®**:
1. ç¢ºèª `vercel.json` å·²æ­£ç¢ºè¨­å®š
2. æª¢æŸ¥ç’°å¢ƒè®Šæ•¸ `ENABLE_AUTO_REMARKETING=true`
3. å‰å¾€ Vercel Dashboard æŸ¥çœ‹ Cron Jobs åŸ·è¡Œè¨˜éŒ„
4. ç¢ºèªè‡³å°‘æœ‰ä¸€å€‹ `isActive=true` çš„è¦å‰‡

**æ‰‹å‹•æ¸¬è©¦**:
```bash
curl -X POST https://your-domain.com/api/remarketing/execute \
  -H "Authorization: Bearer vibe-admin-2024"
```

---

### 12.4 Firestore é€£ç·šå¤±æ•—

**å•é¡Œ**: ç„¡æ³•è®€å–æˆ–å¯«å…¥ Firestore

**æª¢æŸ¥é …ç›®**:
1. ç¢ºèªæ‰€æœ‰ Firebase ç’°å¢ƒè®Šæ•¸å·²æ­£ç¢ºè¨­å®š
2. ç¢ºèª `FIREBASE_PRIVATE_KEY` åŒ…å«å®Œæ•´çš„ç§é‘°ï¼ˆå«æ›è¡Œç¬¦ï¼‰
3. æª¢æŸ¥ Firebase å°ˆæ¡ˆæ˜¯å¦å·²å•Ÿç”¨ Firestore
4. ç¢ºèª Service Account æ¬Šé™æ­£ç¢º

**é™¤éŒ¯æ–¹å¼**:
- æŸ¥çœ‹ Vercel Logs çš„ Firebase åˆå§‹åŒ–è¨Šæ¯
- æ¸¬è©¦ API: `GET /api/test/firebase`

---

## 13. æœªä¾†å„ªåŒ–å»ºè­°

### 13.1 åŠŸèƒ½å¢å¼·

1. **å¤šç®¡ç†å“¡æ”¯æ´**
   - è§’è‰²æ¬Šé™ç®¡ç†ï¼ˆAdmin / Editor / Viewerï¼‰
   - å€‹äººåŒ– Session

2. **é€²éšæ•¸æ“šåˆ†æ**
   - Cohort Analysisï¼ˆåŒæœŸç¾¤åˆ†æï¼‰
   - A/B Testing æ¡†æ¶
   - é æ¸¬åˆ†æï¼ˆæ©Ÿå™¨å­¸ç¿’ï¼‰

3. **è‡ªå‹•åŒ–å·¥ä½œæµç¨‹**
   - è¦–è¦ºåŒ–è¦å‰‡ç·¨è¼¯å™¨ï¼ˆDrag & Dropï¼‰
   - å¤šæ­¥é©Ÿè‡ªå‹•åŒ–ï¼ˆAutomation Workflowsï¼‰

4. **å¤šåª’é«”æ”¯æ´**
   - èŠå¤©å®¤æ”¯æ´åœ–ç‰‡ã€å½±ç‰‡ã€æª”æ¡ˆ
   - æ‰¹æ¬¡ä¸Šå‚³èˆ‡ç®¡ç†

5. **æ•´åˆå…¶ä»–é€šè¨Šå¹³å°**
   - Facebook Messenger
   - Instagram DM
   - Email

---

### 13.2 æŠ€è¡“å„ªåŒ–

1. **æ•ˆèƒ½æå‡**
   - å¯¦ä½œ Redis Cacheï¼ˆå¿«å–ç”¨æˆ¶è³‡æ–™ï¼‰
   - ä½¿ç”¨ SWR æˆ– React Query å„ªåŒ–å‰ç«¯è³‡æ–™è«‹æ±‚
   - åœ–ç‰‡ CDN èˆ‡ Lazy Loading

2. **å³æ™‚é€šè¨Š**
   - å°‡è¼ªè©¢æ”¹ç‚º WebSocket æˆ– Server-Sent Events
   - å³æ™‚é€šçŸ¥ï¼ˆPush Notificationsï¼‰

3. **è³‡æ–™åº«å„ªåŒ–**
   - å»ºç«‹è¤‡åˆç´¢å¼•åŠ é€ŸæŸ¥è©¢
   - å®šæœŸæ¸…ç†éæœŸè³‡æ–™
   - è³‡æ–™å‚™ä»½æ©Ÿåˆ¶

4. **æ¸¬è©¦è¦†è“‹ç‡**
   - å–®å…ƒæ¸¬è©¦ï¼ˆJestï¼‰
   - æ•´åˆæ¸¬è©¦ï¼ˆPlaywrightï¼‰
   - E2E æ¸¬è©¦

5. **CI/CD Pipeline**
   - GitHub Actions è‡ªå‹•åŒ–æ¸¬è©¦
   - è‡ªå‹•éƒ¨ç½²è‡³ Staging ç’°å¢ƒ
   - ç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥ï¼ˆESLint, Prettierï¼‰

---

## 14. çµèª

æœ¬ PRD æ–‡æª”è©³ç´°æè¿°äº† Vibe Coding èª²ç¨‹ç®¡ç†å¾Œå°ç³»çµ±çš„æ‰€æœ‰åŠŸèƒ½ã€æŠ€è¡“æ¶æ§‹èˆ‡å¯¦ä½œç´°ç¯€ã€‚ä¾ç…§æœ¬æ–‡æª”ï¼Œé–‹ç™¼è€…å¯ä»¥å¾é›¶é–‹å§‹é‡å»ºä¸€å€‹åŠŸèƒ½å®Œå…¨ç›¸åŒçš„ç³»çµ±ã€‚

### å¿«é€Ÿé–‹å§‹æª¢æŸ¥æ¸…å–®
- [ ] è¤‡è£½å°ˆæ¡ˆä¸¦å®‰è£ä¾è³´ (`npm install`)
- [ ] è¨­å®š `.env.local` ç’°å¢ƒè®Šæ•¸
- [ ] åˆå§‹åŒ– Firebase Firestore
- [ ] è¨­å®š LINE Bot Webhook
- [ ] æœ¬åœ°æ¸¬è©¦ (`npm run dev`)
- [ ] éƒ¨ç½²è‡³ Vercel
- [ ] è¨­å®š Cron Jobs
- [ ] é©—è­‰æ‰€æœ‰åŠŸèƒ½æ­£å¸¸é‹ä½œ

### æ”¯æ´èˆ‡è¯çµ¡
å¦‚æœ‰ä»»ä½•å•é¡Œï¼Œè«‹åƒè€ƒï¼š
- åŸå§‹ Repository: [GitHub URL]
- æ–‡æª”æ›´æ–°æ—¥èªŒ: [CHANGELOG.md]
- Issue Tracker: [GitHub Issues]

---

**æ–‡æª”çµæŸ**
